(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+V/L":function(t,e){},"5Pnk":function(t,e){},FHBk:function(t,e){},Fnts:function(t,e){},"GL/P":function(t,e){},JNMp:function(t,e){},Rzch:function(t,e){},S3r0:function(t,e){},Vtdi:function(t,e,i){"use strict";i.r(e);var n=i("oCYn"),r=i("4d7F"),o=i.n(r),s="AUTH_LOGOUT",a="AUTH_TOKEN",c="AUTH_SIGNUP",l="AUTH_REQUEST",d="AUTH_AUTH",u="USER_REQUEST",p="USERS_REQUEST",h="USER_SUCCESS",f="USERS_EMAILS",v="USER_UPDATE",m="USER_CONFIRM_UPDATE_PASSWORD",_="USER_CHANGE_PASSWORD",g="USER_UPDATE_OTHER",w="USER_UPDATE_IMAGE",C="USER_PHOTO",x="USER_PHOTO_SUCCESS",y="DOCS_REQUEST",b="DOCS_REGS",k="DOCS_REG_CREATE",S="DOCS_REG_EDIT",A="DOCS_REG_DELETE",$="DOCS_REGS_SUCCESS",E="DOC_EDIT_NOTIF",P="DOCS_FILTER",M="DOCS_FILTER_SUCCESS",L="DOC_UPLOAD",D="DOC_DOWNLOAD",F="DOC_DOWNLOAD_SIGN",z="DOC_DELETE",T="DOC_UPDATE",R="DOC_SIGNATURE",N="DOC_SIGNATURE_CHECK",U="DOC_SIGNATURE_CANCEL",O="DOC_SIGNATURE_AGAIN",q="DOC_EDIT",I="DOCS_SUCCESS",B="DOCS_FILE_CABINETS",H="DOCS_FILE_CABINET",j="DOCS_FILE_CABINET_CREATE",G="DOCS_FILE_CABINET_EDIT",Z="DOCS_FILE_CABINET_DELETE",V="ADDIT_RELOAD",K="ADDIT_REMEMBER_PASSWORD",W="ADDIT_ERROR_AUTH",Q="https://edms-mtuci.herokuapp.com",J={name:"rememberPassword",props:{typeFile:{type:String,default:""}},data:function(){return{emailForConfirm:null,processConfirm:!1,code:null,password1:null,password2:null,newPassword:1}},computed:{rememberP:{get:function(){return this.$store.getters.getRememberPassword},set:function(t){return this.$store.commit(K,t)}},error:{get:function(){return this.$store.getters.getErrorAuth},set:function(t){return this.$store.commit(W,t)}}},methods:{rememberPassword:function(){var t=this,e=this.emailForConfirm;this.processConfirm=!0,this.$store.dispatch(m,e).then(function(e){t.error=null,t.processConfirm=!1,t.newPassword=2}).catch(function(e){t.processConfirm=!1,200<e.length?"NameError at /rest_auth/password/reset/"==e.substring(0,39)?t.error="Такой email не зарегестрирован в системе.":t.error=e.substring(0,200)+"...":t.error=e})},updatePassword:function(){var t=this,e=this.code,i=this.password1,n=this.password2;i==n?(this.error="Круто клево",this.processConfirm=!0,this.$store.dispatch(_,{uid:e.split("/")[0],token:e.split("/")[1],password1:i,password2:n}).then(function(e){t.error=null,t.processConfirm=!1,t.rememberP=!1}).catch(function(e){console.log(e),'{"uid":["Invalid value"]}'==e||'{"token":["Invalid value"]}'==e?t.err="Неверный код.":'{"new_password2":["This password is too short. It must contain at least 8 characters.","This password is too common.","This password is entirely numeric."]}'==e?t.err="Слишком короткий пароль.":200<e.length?t.error=e.substring(0,200)+"...":t.error=e})):this.error="Пароли не совпадают."}}},X=i("JFUb");var Y={name:"auth",components:{RememberPassword:Object(X.a)(J,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"rememberPassword"}},[1==t.newPassword?i("div",[i("p",{staticClass:"title"},[t._v("СМЕНА ПАРОЛЯ - ШАГ 1")]),t._v(" "),i("p",{staticClass:"text"},[t._v("\n            Это страница смены пароля. Чтобы подтвердить свою почту, впишите ее в поле.\n            Вам придет код на почту, который следует ввести на следующем шаге.\n        ")]),t._v(" "),i("p",[t._v("EMAIL")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.emailForConfirm,expression:"emailForConfirm"}],staticClass:"search-box",attrs:{name:"email2",type:"email",placeholder:"Введите email"},domProps:{value:t.emailForConfirm},on:{input:function(e){e.target.composing||(t.emailForConfirm=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"25px"}}),t._v(" "),t.processConfirm?t._e():i("div",[i("button",{attrs:{type:"submit"},on:{click:function(e){t.rememberP=!1,t.error=""}}},[t._v("ВЕРНУТЬСЯ")]),t._v(" "),i("button",{staticStyle:{"margin-left":"5px"},attrs:{type:"submit"},on:{click:function(e){return t.rememberPassword()}}},[t._v("ОТПРАВИТЬ")])]),t._v(" "),t.processConfirm?i("div",[i("p",{staticStyle:{padding:"20px"}},[t._v("Отправляется...")])]):t._e()]):t._e(),t._v(" "),2==t.newPassword?i("div",[i("p",{staticClass:"title"},[t._v("СМЕНА ПАРОЛЯ - ШАГ 2")]),t._v(" "),i("p",{staticClass:"text"},[t._v("\n            Введите код подтверждения и новый пароль. Подтвердите пароль.\n        ")]),t._v(" "),i("p",[t._v("КОД ПОДТВЕРЖДЕНИЯ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"search-box",attrs:{name:"code",type:"email",placeholder:"Введите email"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),i("p",[t._v("НОВЫЙ ПАРОЛЬ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password1,expression:"password1"}],staticClass:"search-box",attrs:{name:"password1",type:"password",placeholder:"Введите пароль"},domProps:{value:t.password1},on:{input:function(e){e.target.composing||(t.password1=e.target.value)}}}),t._v(" "),i("p",[t._v("ПОДТВЕРЖДЕНИЕ ПАРОЛЯ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"search-box",attrs:{name:"password2",type:"password",placeholder:"Подтвердите пароль"},domProps:{value:t.password2},on:{input:function(e){e.target.composing||(t.password2=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"25px"}}),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){t.rememberP=!1,t.error=""}}},[t._v("ВЕРНУТЬСЯ")]),t._v(" "),i("button",{staticStyle:{"margin-left":"5px"},attrs:{type:"submit"},on:{click:function(e){return t.updatePassword()}}},[t._v("ПОДТВЕРДИТЬ")])]):t._e()])},[],!1,function(t){i("bWC2")},"data-v-7774d3b9",null).exports},data:function(){return{email:null,password:null,passwordFieldType:"password"}},created:function(){this.rememberPassword=!1,this.error=""},computed:{rememberPassword:{get:function(){return this.$store.getters.getRememberPassword},set:function(t){return this.$store.commit(K,t)}},error:{get:function(){return this.$store.getters.getErrorAuth},set:function(t){return this.$store.commit(W,t)}}},methods:{switchVisibility:function(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password"},doLogin:function(t){var e=this,i=this.email,n=this.password;this.$store.dispatch(l,{email:i,password:n}).then(function(){e.error=null,e.$router.push("/")}).catch(function(t){'{"non_field_errors":["Unable to log in with provided credentials."]}'==t||'{"email":["Enter a valid email address."]}'==t?e.error="Неверный логин или пароль.":(200<t.length?e.error=t.substring(0,200)+"...":e.error=t,console.log(t))})}}};var tt=Object(X.a)(Y,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"mainAuth"}},[i("div"),t._v(" "),i("div",{staticClass:"login"},[i("div"),t._v(" "),i("div",[0==t.rememberPassword?i("div",{staticClass:"auth"},[i("p",{staticClass:"title"},[t._v("ВХОД")]),t._v(" "),i("div",[i("p",[t._v("EMAIL")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"search-box",staticStyle:{width:"200px"},attrs:{name:"email",type:"text",placeholder:"Введите логин"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("p",[t._v("ПАРОЛЬ")]),t._v(" "),i("div",{staticStyle:{background:"white",margin:"0 auto",width:"230px"}},["checkbox"===t.passwordFieldType?i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"search-box",staticStyle:{width:"166px"},attrs:{name:"password",placeholder:"Введите пароль",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?-1<t._i(t.password,null):t.password},on:{change:function(e){var i=t.password,n=e.target,r=!!n.checked;if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.password=i.concat([null])):-1<o&&(t.password=i.slice(0,o).concat(i.slice(o+1)))}else t.password=r}}}):"radio"===t.passwordFieldType?i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"search-box",staticStyle:{width:"166px"},attrs:{name:"password",placeholder:"Введите пароль",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(e){t.password=null}}}):i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"search-box",staticStyle:{width:"166px"},attrs:{name:"password",placeholder:"Введите пароль",type:t.passwordFieldType},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),i("button",{staticClass:"showPassword",attrs:{type:"password"},on:{click:function(e){return t.switchVisibility()}}},[i("svg",{attrs:{width:"16px",stroke:"black","enable-background":"new 0 0 10 12",id:"Editable-line",viewBox:"0 0 30 30"}},[i("path",{attrs:{d:"  M16,7C9.934,7,4.798,10.776,3,16c1.798,5.224,6.934,9,13,9s11.202-3.776,13-9C27.202,10.776,22.066,7,16,7z",fill:"none",id:"XMLID_13_","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2"}}),t._v(" "),i("circle",{attrs:{cx:"16",cy:"16",fill:"none",id:"XMLID_14_",r:"5","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2"}}),t._v(" "),"password"==t.passwordFieldType?i("line",{attrs:{fill:"none",id:"XMLID_15_","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2",x1:"3",x2:"29",y1:"3",y2:"29"}}):t._e()])])]),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){return t.doLogin()}}},[t._v("ВОЙТИ")]),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"rememberPassword",on:{click:function(e){t.rememberPassword=!0}}},[t._v("\n\t\t\t\t\t\t\tЗабыли пароль?\n\t\t\t\t\t\t")])])]):t._e(),t._v(" "),1==t.rememberPassword?i("RememberPassword",{staticClass:"auth"}):t._e()],1),t._v(" "),t.error?i("p",{staticStyle:{color:"red","max-width":"400px"}},[t._v(" "+t._s(t.error)+" ")]):t._e()])])},[],!1,function(t){i("+V/L")},"data-v-6119e7be",null).exports,et=i("QbLZ"),it=i.n(et),nt=i("L2JU"),rt={name:"Header",components:{},data:function(){return{search:"",n:"",notifHover:!1}},created:function(){this.$store.dispatch(C),this.$store.dispatch(y)},computed:it()({},Object(nt.b)({getProfile:"getProfile",getPhoto:"getPhoto",getDocsOld:"getDocsOld"}),{photo:function(){return console.log(this.$store.getters.getPhoto),this.getPhoto},title:function(){return"Открыть профиль\n"+this.getProfile.email},notif:function(){return this.getDocsOld.filter(function(t){return 3==t.status||2==t.status}).length||0},notifColor:function(){return this.notifHover?"#aaa9f8":0<this.notif?"#ff7391":"#FFFFFF"},notifIcon:function(){return 0<this.notif?"https://img.icons8.com/material/30/ff7373/bell.png":"https://img.icons8.com/material/30/FFFFFF/bell.png"}}),methods:{toMain:function(){this.$router.push("/")},toNotif:function(){this.$router.push("/profile/notif")},toAddDoc:function(){this.$router.push("/addDoc")},toProfile:function(){this.$router.push("/profile/notif")}}};var ot=Object(X.a)(rt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background"},[i("div",{attrs:{id:"header"}},[i("div",{staticClass:"logo",attrs:{title:"На главную"},on:{click:function(e){return t.toMain()}}},[i("svg",{attrs:{height:"23pt",viewBox:"0 0 80 80"}},[i("g",[i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 37.9375 C 45.863281 38.402344 46.332031 38.667969 46.816406 38.667969 C 47.019531 38.667969 47.226562 38.621094 47.421875 38.523438 C 47.5 38.480469 55.347656 34.496094 59.21875 33.273438 C 59.921875 33.050781 60.308594 32.300781 60.085938 31.597656 C 59.867188 30.898438 59.121094 30.507812 58.414062 30.730469 C 54.335938 32.019531 46.542969 35.976562 46.210938 36.144531 C 45.554688 36.480469 45.292969 37.28125 45.625 37.9375 Z M 45.625 37.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 46.816406 22.667969 C 47.019531 22.667969 47.226562 22.621094 47.421875 22.523438 C 47.5 22.480469 55.347656 18.496094 59.21875 17.273438 C 59.921875 17.050781 60.308594 16.300781 60.085938 15.597656 C 59.867188 14.898438 59.121094 14.507812 58.414062 14.730469 C 54.335938 16.019531 46.542969 19.976562 46.210938 20.144531 C 45.554688 20.480469 45.292969 21.28125 45.625 21.9375 C 45.863281 22.402344 46.332031 22.667969 46.816406 22.667969 Z M 46.816406 22.667969 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 78.816406 20 C 78.078125 20 77.484375 20.597656 77.484375 21.332031 L 77.484375 73.332031 C 77.484375 75.539062 75.6875 77.332031 73.484375 77.332031 L 41.484375 77.332031 L 41.484375 74.265625 C 43.425781 73.585938 48.492188 72 53.484375 72 C 65.097656 72 72.984375 74.574219 73.0625 74.597656 C 73.464844 74.734375 73.914062 74.664062 74.261719 74.414062 C 74.609375 74.164062 74.816406 73.761719 74.816406 73.332031 L 74.816406 14.667969 C 74.816406 14.042969 74.382812 13.5 73.773438 13.367188 C 73.773438 13.367188 72.726562 13.132812 70.941406 12.804688 C 70.21875 12.671875 69.519531 13.152344 69.386719 13.875 C 69.253906 14.597656 69.734375 15.292969 70.457031 15.425781 C 71.140625 15.550781 71.710938 15.664062 72.148438 15.75 L 72.148438 71.5625 C 69.128906 70.769531 62.417969 69.332031 53.484375 69.332031 C 47.671875 69.332031 41.964844 71.242188 40.203125 71.886719 C 38.632812 71.195312 33.886719 69.332031 28.148438 69.332031 C 18.964844 69.332031 11.398438 70.847656 8.148438 71.617188 L 8.148438 15.699219 C 10.8125 15.042969 18.675781 13.332031 28.148438 13.332031 C 33.011719 13.332031 37.179688 14.847656 38.816406 15.53125 L 38.816406 68 C 38.816406 68.480469 39.074219 68.925781 39.492188 69.160156 C 39.910156 69.398438 40.425781 69.390625 40.835938 69.144531 C 40.96875 69.066406 54.179688 61.175781 65.902344 57.265625 C 66.449219 57.082031 66.816406 56.574219 66.816406 56 L 66.816406 1.332031 C 66.816406 0.898438 66.601562 0.488281 66.242188 0.238281 C 65.882812 -0.0117188 65.425781 -0.0703125 65.011719 0.0859375 C 54.34375 4.085938 43.550781 10.804688 43.441406 10.871094 C 42.820312 11.261719 42.628906 12.082031 43.019531 12.707031 C 43.40625 13.332031 44.230469 13.523438 44.855469 13.132812 C 44.953125 13.070312 54.34375 7.226562 64.148438 3.285156 L 64.148438 55.046875 C 55.046875 58.207031 45.546875 63.371094 41.484375 65.683594 L 41.484375 14.667969 C 41.484375 14.160156 41.195312 13.699219 40.746094 13.472656 C 40.515625 13.359375 35.050781 10.667969 28.148438 10.667969 C 16.101562 10.667969 6.839844 13.273438 6.449219 13.386719 C 5.878906 13.546875 5.484375 14.074219 5.484375 14.667969 L 5.484375 73.335938 C 5.484375 73.75 5.679688 74.144531 6.011719 74.398438 C 6.246094 74.574219 6.527344 74.667969 6.816406 74.667969 C 6.9375 74.667969 7.0625 74.648438 7.179688 74.617188 C 7.273438 74.589844 16.492188 72 28.148438 72 C 33.023438 72 37.1875 73.519531 38.816406 74.199219 L 38.816406 77.335938 L 6.816406 77.335938 C 4.609375 77.335938 2.816406 75.539062 2.816406 73.335938 L 2.816406 21.335938 C 2.816406 20.597656 2.21875 20 1.484375 20 C 0.746094 20 0.148438 20.597656 0.148438 21.335938 L 0.148438 73.335938 C 0.148438 77.011719 3.140625 80 6.816406 80 L 73.484375 80 C 77.160156 80 80.148438 77.011719 80.148438 73.335938 L 80.148438 21.335938 C 80.148438 20.597656 79.554688 20 78.816406 20 Z M 78.816406 20 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 29.9375 C 45.863281 30.402344 46.332031 30.667969 46.816406 30.667969 C 47.019531 30.667969 47.226562 30.621094 47.421875 30.523438 C 47.5 30.480469 55.347656 26.496094 59.21875 25.273438 C 59.921875 25.050781 60.308594 24.300781 60.085938 23.597656 C 59.867188 22.898438 59.121094 22.507812 58.414062 22.730469 C 54.335938 24.019531 46.542969 27.976562 46.210938 28.144531 C 45.554688 28.480469 45.292969 29.28125 45.625 29.9375 Z M 45.625 29.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 45.9375 C 45.863281 46.402344 46.332031 46.667969 46.816406 46.667969 C 47.019531 46.667969 47.226562 46.621094 47.421875 46.523438 C 47.5 46.480469 55.347656 42.496094 59.21875 41.273438 C 59.921875 41.050781 60.308594 40.300781 60.085938 39.597656 C 59.867188 38.898438 59.121094 38.507812 58.414062 38.730469 C 54.335938 40.019531 46.542969 43.976562 46.210938 44.144531 C 45.554688 44.480469 45.292969 45.28125 45.625 45.9375 Z M 45.625 45.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 24.746094 C 24.21875 22.8125 14.863281 25.273438 14.472656 25.378906 C 13.761719 25.570312 13.335938 26.300781 13.527344 27.011719 C 13.6875 27.609375 14.226562 28 14.816406 28 C 14.929688 28 15.046875 27.984375 15.160156 27.957031 C 15.25 27.929688 24.257812 25.5625 31.84375 27.339844 C 32.558594 27.507812 33.28125 27.0625 33.449219 26.347656 C 33.617188 25.628906 33.171875 24.914062 32.453125 24.746094 Z M 32.453125 24.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 32.746094 C 24.21875 30.8125 14.863281 33.273438 14.472656 33.378906 C 13.761719 33.570312 13.335938 34.300781 13.527344 35.011719 C 13.6875 35.609375 14.226562 36 14.816406 36 C 14.929688 36 15.046875 35.984375 15.160156 35.957031 C 15.25 35.929688 24.257812 33.5625 31.84375 35.339844 C 32.558594 35.507812 33.28125 35.0625 33.449219 34.347656 C 33.617188 33.628906 33.171875 32.914062 32.453125 32.746094 Z M 32.453125 32.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 53.9375 C 45.863281 54.402344 46.332031 54.667969 46.816406 54.667969 C 47.019531 54.667969 47.226562 54.621094 47.421875 54.523438 C 47.5 54.480469 55.347656 50.496094 59.21875 49.273438 C 59.921875 49.050781 60.308594 48.300781 60.085938 47.597656 C 59.867188 46.898438 59.121094 46.507812 58.414062 46.730469 C 54.335938 48.019531 46.542969 51.976562 46.210938 52.144531 C 45.554688 52.480469 45.292969 53.28125 45.625 53.9375 Z M 45.625 53.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 40.746094 C 24.21875 38.8125 14.863281 41.273438 14.472656 41.378906 C 13.761719 41.570312 13.335938 42.300781 13.527344 43.011719 C 13.6875 43.609375 14.226562 44.003906 14.816406 44.003906 C 14.929688 44.003906 15.046875 43.984375 15.160156 43.957031 C 15.25 43.929688 24.257812 41.5625 31.84375 43.339844 C 32.558594 43.507812 33.28125 43.0625 33.449219 42.347656 C 33.617188 41.628906 33.171875 40.914062 32.453125 40.746094 Z M 32.453125 40.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 56.746094 C 24.21875 54.8125 14.863281 57.273438 14.472656 57.378906 C 13.761719 57.570312 13.335938 58.300781 13.527344 59.011719 C 13.6875 59.609375 14.226562 60.003906 14.816406 60.003906 C 14.929688 60.003906 15.046875 59.984375 15.160156 59.957031 C 15.25 59.929688 24.257812 57.5625 31.84375 59.339844 C 32.558594 59.507812 33.28125 59.0625 33.449219 58.347656 C 33.617188 57.628906 33.171875 56.914062 32.453125 56.746094 Z M 32.453125 56.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 48.746094 C 24.21875 46.8125 14.863281 49.273438 14.472656 49.378906 C 13.761719 49.570312 13.335938 50.300781 13.527344 51.011719 C 13.6875 51.609375 14.226562 52.003906 14.816406 52.003906 C 14.929688 52.003906 15.046875 51.984375 15.160156 51.957031 C 15.25 51.929688 24.257812 49.5625 31.84375 51.339844 C 32.558594 51.507812 33.28125 51.0625 33.449219 50.347656 C 33.617188 49.628906 33.171875 48.914062 32.453125 48.746094 Z M 32.453125 48.746094 "}})])]),t._v(" "),i("p",{staticClass:"logoP"},[t._v("СЭД МТУСИ")])]),t._v(" "),i("div"),t._v(" "),i("div",{staticClass:"header-right"},[i("div",{staticClass:"icon",attrs:{title:"Добавить документ"},on:{click:t.toAddDoc}},[i("div",[t._v("+")]),t._v(" "),i("svg",{attrs:{fill:"white",width:"30px",height:"30px",viewBox:"0 0 32 32"}},[i("g",{attrs:{"fill-rule":"evenodd",stroke:"none","stroke-width":"1"}},[i("g",[i("path",{attrs:{d:"M19.5,3 L9.00276013,3 C7.89666625,3 7,3.89833832 7,5.00732994 L7,27.9926701 C7,29.1012878 7.89092539,30 8.99742191,30 L24.0025781,30 C25.1057238,30 26,29.1017876 26,28.0092049 L26,10.5 L26,10 L20,3 L19.5,3 L19.5,3 L19.5,3 Z M19,4 L8.9955775,4 C8.44573523,4 8,4.45526288 8,4.99545703 L8,28.004543 C8,28.5543187 8.45470893,29 8.9999602,29 L24.0000398,29 C24.5523026,29 25,28.5550537 25,28.0066023 L25,11 L20.9979131,11 C19.8944962,11 19,10.1134452 19,8.99408095 L19,4 L19,4 Z M20,4.5 L20,8.99121523 C20,9.54835167 20.4506511,10 20.9967388,10 L24.6999512,10 L20,4.5 L20,4.5 Z M15,14 L15,15 L23,15 L23,14 L15,14 L15,14 Z M10,13 L10,16 L13,16 L13,13 L10,13 L10,13 Z M11,14 L11,15 L12,15 L12,14 L11,14 L11,14 Z M10,18 L10,21 L13,21 L13,18 L10,18 L10,18 Z M11,19 L11,20 L12,20 L12,19 L11,19 L11,19 Z M15,19 L15,20 L23,20 L23,19 L15,19 L15,19 Z M10,23 L10,26 L13,26 L13,23 L10,23 L10,23 Z M11,24 L11,25 L12,25 L12,24 L11,24 L11,24 Z M15,24 L15,25 L23,25 L23,24 L15,24 L15,24 Z"}})])])])]),t._v(" "),i("div",{staticClass:"icon",attrs:{title:"Уведомления"},on:{mouseenter:function(e){t.notifHover=!0},mouseleave:function(e){t.notifHover=!1},click:t.toNotif}},[i("div",{style:{color:t.notifColor}},[t._v(t._s(t.notif))]),t._v(" "),i("svg",{style:{fill:t.notifColor},attrs:{width:"30px",height:"30px",viewBox:"25 0 15 78"}},[i("g",{attrs:{id:"Layer_2"}},[i("g",{attrs:{id:"Layer_3"}},[i("path",{attrs:{d:"M54.2,54.4l-5.1-6.3c-0.5-0.7-0.8-1.5-0.8-2.4v-13c0-8.1-5.4-15.3-13.2-17.5v-5.1c0-2.8-2.3-5-5-5s-5,2.3-5,5v5    c-7.9,2.3-13.3,9.5-13.2,17.6v13c0,0.9-0.3,1.7-0.8,2.4l-5.1,6.3c-0.4,0.5-0.7,1.2-0.7,1.9v7.9h49.8v-7.9    C54.9,55.6,54.6,54.9,54.2,54.4z M28,10.1c0-1.1,0.9-2,2-2s2,0.9,2,2v4.5c-1.4-0.2-2.7-0.2-4.1,0V10.1z M51.9,61.1H8.1v-4.8    l5.1-6.3c1-1.2,1.5-2.7,1.5-4.3v-13c0-8.4,6.8-15.3,15.3-15.3s15.3,6.8,15.3,15.3v13c0,1.6,0.5,3.1,1.5,4.3l5.1,6.3V61.1z"}}),t._v(" "),i("path",{attrs:{d:"M28,20.8v3c6.1,0,11.1,5,11.1,11.1c0,0,0,0,0,0h3C42.1,27.1,35.8,20.8,28,20.8C28,20.8,28,20.8,28,20.8z"}}),t._v(" "),i("path",{attrs:{d:"M30,69.9c-2.9,0-5.2-2.3-5.2-5.2h-3c0,4.5,3.7,8.2,8.2,8.2c4.5,0,8.2-3.7,8.2-8.2h-3C35.2,67.6,32.9,69.9,30,69.9z"}})])])])]),t._v(" "),i("img",{staticClass:"profile",attrs:{title:t.title,src:t.photo},on:{click:function(e){return t.toProfile()}}})])])])},[],!1,function(t){i("eJ4n")},"data-v-19e0ee15",null).exports;var st=Object(X.a)({name:"Header",data:function(){return{}},methods:{toHelp:function(){this.$router.push("/help")}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background"},[i("div",{attrs:{id:"footer"}},[i("p",[t._v("МТУСИ, 2019 | "),i("label",{on:{click:function(e){return t.toHelp()}}},[t._v("Помощь")])])])])},[],!1,function(t){i("jM++")},"data-v-147a2542",null).exports,at=i("vDqi"),ct=i.n(at),lt={name:"App",components:{Header:ot,Footer:st,Auth:tt},data:function(){return{}},created:function(){ct.a.interceptors.response.use(void 0,function(t){return new o.a(function(e,i){throw 401===t.status&&t.config&&!t.config.__isRetryRequest&&this.$store.dispatch(AUTH_LOGOUT),t})})}};var dt=Object(X.a)(lt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[this.$store.getters.isAuthenticated||this.$store.getters.auth?this.$store.getters.auth?i("div",{staticClass:"authenticated"},[i("Header"),t._v(" "),i("router-view"),t._v(" "),i("Footer")],1):i("div",{staticClass:"load"},[i("div"),t._v(" "),i("div",{staticClass:"loadText"},[t._m(0),t._v(" "),i("svg",{staticClass:"loadSvg",attrs:{version:"1.1",viewBox:"0 0 16 16","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("path",{attrs:{d:"M14,8c-0.609,0-0.898,0.43-1,0.883C12.635,10.516,11.084,13,8,13c-0.757,0-1.473-0.172-2.114-0.474L6.414,12  C6.773,11.656,7,11.445,7,11c0-0.523-0.438-1-1-1H3c-0.609,0-1,0.492-1,1v3c0,0.541,0.428,1,1,1c0.484,0,0.688-0.273,1-0.594  l0.408-0.407C5.458,14.632,6.685,15,8,15c4.99,0,7-4.75,7-5.938C15,8.336,14.469,8,14,8z M3,7.117C3.365,5.485,4.916,3,8,3  c0.757,0,1.473,0.171,2.114,0.473L9.586,4C9.227,4.344,9,4.555,9,5c0,0.523,0.438,1,1,1h3c0.609,0,1-0.492,1-1V2  c0-0.541-0.428-1-1-1c-0.484,0-0.688,0.273-1,0.594l-0.408,0.407C10.542,1.368,9.315,1,8,1C3.01,1,1,5.75,1,6.938  C1,7.664,1.531,8,2,8C2.609,8,2.898,7.57,3,7.117z"}})])]),t._v(" "),i("div")]):i("div",[i("Auth")],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Система"),e("br"),this._v("загружается")])}],!1,function(t){i("S3r0")},null,null).exports,ut=i("jE9Z"),pt=i("14Xm"),ht=i.n(pt),ft=i("D3Ub"),vt=i.n(ft),mt={name:"MenuGoTo",props:{path:{type:String,default:""},text:{type:String,default:""},color:{type:String,default:"black"}},data:function(){return{}},created:function(){},computed:{reload:{get:function(){return this.$store.getters.getReload},set:function(t){this.$store.commit(V,t)}}},methods:{goToFolder:function(){var t=this;return vt()(ht.a.mark(function e(){return ht.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.reload=!0,e.next=3,t.$store.dispatch(y);case 3:return e.next=5,t.$store.dispatch(P);case 5:t.reload=!1;case 6:case"end":return e.stop()}},e,t)}))()}}};var _t={name:"Menu",components:{MenuGoTo:Object(X.a)(mt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"menuGoTo"}},[i("router-link",{staticClass:"router-link",attrs:{to:{path:t.path}},nativeOn:{click:function(e){return t.goToFolder(e)}}},[t._v("\n        "+t._s(t.text)+"\n    ")])],1)},[],!1,function(t){i("Wk90")},"data-v-0971944f",null).exports},data:function(){return{fileCabinets:[],fileCabinet:"",closeMenu:!1}},created:function(){this.reload=!0,this.$store.dispatch(P);var t=this.$store.getters.getDocsOld;this.fileCabinets=this.$store.getters.getFileCabinets,this.fileCabinets=this.fileCabinets.filter(function(e){return 0!=t.filter(function(t){return t.doc.file_cabinet.id==e.id}).length}),this.fileCabinet=this.$store.getters.getFileCabinet,this.fileCabinet in this.fileCabinets==0&&(this.fileCabinet=this.fileCabinets[0]),this.reload=!1},computed:{reload:{get:function(){return this.$store.getters.getReload},set:function(t){this.$store.commit(V,t)}}},methods:{onChange:function(){var t=this;return vt()(ht.a.mark(function e(){return ht.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.reload=!0,e.next=3,t.$store.commit(H,t.fileCabinet);case 3:return e.next=5,t.$store.dispatch(y);case 5:return e.next=7,t.$store.dispatch(P);case 7:t.reload=!1;case 8:case"end":return e.stop()}},e,t)}))()}}};var gt={name:"auth",components:{Menu:Object(X.a)(_t,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"menu"}},[t.closeMenu?i("div",{staticClass:"openCloseMenuButton",staticStyle:{height:"100%"},attrs:{title:"Раскрыть"},on:{click:function(e){t.closeMenu=!1}}},[i("svg",{attrs:{fill:"#347090","enable-background":"new 0 0 96 96",height:"26px",viewBox:"0 0 96 96",width:"26px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("path",{attrs:{d:"M12,52h62.344L52.888,73.456c-1.562,1.562-1.562,4.095-0.001,5.656c1.562,1.562,4.096,1.562,5.658,0l28.283-28.284l0,0  c0.186-0.186,0.352-0.391,0.498-0.609c0.067-0.101,0.114-0.21,0.172-0.315c0.066-0.124,0.142-0.242,0.195-0.373  c0.057-0.135,0.089-0.275,0.129-0.415c0.033-0.111,0.076-0.217,0.099-0.331C87.973,48.525,88,48.263,88,48l0,0  c0-0.003-0.001-0.006-0.001-0.009c-0.001-0.259-0.027-0.519-0.078-0.774c-0.024-0.12-0.069-0.231-0.104-0.349  c-0.039-0.133-0.069-0.268-0.123-0.397c-0.058-0.139-0.136-0.265-0.208-0.396c-0.054-0.098-0.097-0.198-0.159-0.292  c-0.146-0.221-0.314-0.427-0.501-0.614L58.544,16.888c-1.562-1.562-4.095-1.562-5.657-0.001c-1.562,1.562-1.562,4.095,0,5.658  L74.343,44L12,44c-2.209,0-4,1.791-4,4C8,50.209,9.791,52,12,52z"}})])]):t._e(),t._v(" "),t.closeMenu?t._e():i("div",{staticClass:"menuOpen"},[i("div",{staticStyle:{display:"grid","grid-template-columns":"1fr auto"},attrs:{title:"Скрыть"}},[t.reload?t._e():i("p",[t._v(" ")]),t._v(" "),t.reload?i("svg",{staticClass:"reload",attrs:{version:"1.1",viewBox:"0 0 16 16","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("path",{attrs:{d:"M14,8c-0.609,0-0.898,0.43-1,0.883C12.635,10.516,11.084,13,8,13c-0.757,0-1.473-0.172-2.114-0.474L6.414,12  C6.773,11.656,7,11.445,7,11c0-0.523-0.438-1-1-1H3c-0.609,0-1,0.492-1,1v3c0,0.541,0.428,1,1,1c0.484,0,0.688-0.273,1-0.594  l0.408-0.407C5.458,14.632,6.685,15,8,15c4.99,0,7-4.75,7-5.938C15,8.336,14.469,8,14,8z M3,7.117C3.365,5.485,4.916,3,8,3  c0.757,0,1.473,0.171,2.114,0.473L9.586,4C9.227,4.344,9,4.555,9,5c0,0.523,0.438,1,1,1h3c0.609,0,1-0.492,1-1V2  c0-0.541-0.428-1-1-1c-0.484,0-0.688,0.273-1,0.594l-0.408,0.407C10.542,1.368,9.315,1,8,1C3.01,1,1,5.75,1,6.938  C1,7.664,1.531,8,2,8C2.609,8,2.898,7.57,3,7.117z"}})]):t._e(),t._v(" "),i("svg",{staticClass:"openCloseMenuButton",staticStyle:{"margin-bottom":"0px","margin-top":"15px","margin-right":"15px"},attrs:{height:"21px",viewBox:"0 0 31 32",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.closeMenu=!0}}},[i("g",{attrs:{id:"Cancel",stroke:"#347090","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])]),t._v(" "),i("p",{staticStyle:{"margin-top":"0px"}},[t._v("Картотека")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.fileCabinet,expression:"fileCabinet"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fileCabinet=e.target.multiple?i:i[0]},function(e){return t.onChange()}]}},t._l(t.fileCabinets,function(e){return i("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.name))])}),0),t._v(" "),i("MenuGoTo",{attrs:{text:"ВСЕ ДОКУМЕНТЫ",path:"/documents/all",color:"rgb(174, 0, 255)"}}),t._v(" "),i("MenuGoTo",{attrs:{text:"МОИ ДОКУМЕНТЫ",path:"/documents/myDocs",color:"rgb(21, 103, 255)"}}),t._v(" "),i("MenuGoTo",{attrs:{text:"ОБЩИЙ ДОСТУП",path:"/documents/common",color:"white"}}),t._v(" "),i("MenuGoTo",{attrs:{text:"ДОСТУПНЫ МНЕ",path:"/documents/available-to-me",color:"white"}}),t._v(" "),i("MenuGoTo",{attrs:{text:"НА ПОДПИСИ",path:"/documents/my-doc-signature-request",color:"rgb(0, 158, 8)"}}),t._v(" "),i("MenuGoTo",{attrs:{text:"НА ПОДПИСЬ",path:"/documents/signature-request",color:"rgb(0, 158, 8)"}}),t._v(" "),i("MenuGoTo",{attrs:{text:"ПОДПИСАННОЕ",path:"/documents/signature-success",color:"rgb(0, 158, 8)"}})],1)])},[],!1,function(t){i("jqDq")},"data-v-11e0d1e2",null).exports}};var wt=Object(X.a)(gt,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"maing"}},[e("Menu"),this._v(" "),e("router-view")],1)},[],!1,function(t){i("JNMp")},"data-v-0e729406",null).exports,Ct={name:"headerProfile",data:function(){return{}},created:function(){this.$store.dispatch(C)},computed:{photo:function(){return console.log(this.$store.getters.getPhoto),this.$store.getters.getPhoto},profile:function(){return this.$store.getters.getProfile}}};var xt={name:"profile",components:{HeaderProfile:Object(X.a)(Ct,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"headerProfileGradient"}},[i("div",{attrs:{id:"headerProfile"}},[i("img",{staticClass:"avatar",attrs:{src:t.photo}}),t._v(" "),t.profile.profile.first_name?i("div",{staticClass:"rightPart"},[i("p",{staticStyle:{"margin-top":"0","padding-top":"7px"}},[t._v("\n\t\t\t\t\t"+t._s(t.profile.profile.second_name)+" \n\t\t\t\t\t"+t._s(t.profile.profile.first_name)+"\n\t\t\t\t\t"+t._s(t.profile.profile.patronymic)+"\n\t\t\t\t")]),t._v(" "),i("p",[t._v("\n\t\t\t\t\t"+t._s(t.profile.profile.position)+"\n\t\t\t\t")])]):t._e()]),t._v(" "),i("p",{staticStyle:{padding:"15px",margin:"0"}},[t._v("Моя почта: "+t._s(t.profile.email))])])},[],!1,function(t){i("WBGL")},"data-v-7b989cc3",null).exports},data:function(){return{closeMenu:!1}},computed:it()({},Object(nt.b)({getProfile:"getProfile"})),methods:{notif:function(){this.$router.push("/profile/notif")},edit:function(){this.$router.push("/profile/edit")},adm:function(){this.$router.push("/profile/adm")},logout:function(){var t=this;this.$store.dispatch(s).then(function(){t.$router.push("/auth")})}}};var yt=Object(X.a)(xt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"profile"}},[i("div",{staticClass:"mainProfile"},[t.closeMenu?i("div",{staticClass:"openCloseMenuButton",staticStyle:{background:"#ADE0FC",height:"300px"},on:{click:function(e){t.closeMenu=!1}}},[i("svg",{staticClass:"openCloseMenuButton",attrs:{fill:"#347090","enable-background":"new 0 0 96 96",height:"26px",viewBox:"0 0 96 96",width:"26px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("path",{attrs:{d:"M12,52h62.344L52.888,73.456c-1.562,1.562-1.562,4.095-0.001,5.656c1.562,1.562,4.096,1.562,5.658,0l28.283-28.284l0,0  c0.186-0.186,0.352-0.391,0.498-0.609c0.067-0.101,0.114-0.21,0.172-0.315c0.066-0.124,0.142-0.242,0.195-0.373  c0.057-0.135,0.089-0.275,0.129-0.415c0.033-0.111,0.076-0.217,0.099-0.331C87.973,48.525,88,48.263,88,48l0,0  c0-0.003-0.001-0.006-0.001-0.009c-0.001-0.259-0.027-0.519-0.078-0.774c-0.024-0.12-0.069-0.231-0.104-0.349  c-0.039-0.133-0.069-0.268-0.123-0.397c-0.058-0.139-0.136-0.265-0.208-0.396c-0.054-0.098-0.097-0.198-0.159-0.292  c-0.146-0.221-0.314-0.427-0.501-0.614L58.544,16.888c-1.562-1.562-4.095-1.562-5.657-0.001c-1.562,1.562-1.562,4.095,0,5.658  L74.343,44L12,44c-2.209,0-4,1.791-4,4C8,50.209,9.791,52,12,52z"}})])]):t._e(),t._v(" "),t.closeMenu?t._e():i("div",[i("headerProfile"),t._v(" "),i("div",{staticClass:"menuProfile"},[i("div",{staticStyle:{"margin-top":"10px"}}),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/profile/notif"}}},[t._v("УВЕДОМЛЕНИЯ")]),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/profile/edit"}}},[t._v("РЕДАКТИРОВАНИЕ ПРОФИЛЯ")]),t._v(" "),t.getProfile.is_staff?i("router-link",{staticClass:"router-link",attrs:{to:{path:"/profile/adm"}}},[t._v("АДМИНИСТРИРОВАНИЕ")]):t._e(),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("p",{staticClass:"router-link",on:{click:function(e){return t.logout()}}},[t._v("ВЫЙТИ")])],1),t._v(" "),i("p",{staticClass:"openCloseMenuButton",staticStyle:{"margin-top":"10px"},on:{click:function(e){t.closeMenu=!0}}},[t._v("Скрыть меню")])],1),t._v(" "),i("router-view")],1)])},[],!1,function(t){i("Rzch")},"data-v-fa776194",null).exports,bt={name:"maxInput",props:{value:{type:String,default:""},max:{type:Number,default:250}},computed:{internalValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{onKeyDown:function(t){this.value.length>=this.max&&48<=t.keyCode&&t.keyCode<=90&&t.preventDefault()}}},kt={name:"edirProfile",components:{MaxInput:Object(X.a)(bt,function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.internalValue,expression:"internalValue"}],domProps:{value:t.internalValue},on:{keydown:t.onKeyDown,input:function(e){e.target.composing||(t.internalValue=e.target.value)}}})},[],!1,null,null,null).exports},data:function(){return{password1:"",password2:"",first_name:"",second_name:"",patronymic:"",position:"",is_get_notif_email:"",image:"",error:"",passError:"",upload:""}},created:function(){this.$store.dispatch(u),this.is_get_notif_email=this.$store.getters.getProfile.is_get_notif_email},methods:{onFileChange:function(t){this.upload="Загружается...";var e=t.target.files||t.dataTransfer.files;if(e.length){var i=new FormData;i.append("profile.photo",e[0]),this.file=i,this.createImage(e[0]),this.upload=""}},createImage:function(t){var e=this;this.error="Загружаем...",new Image;var i=new FileReader,n=this;i.onload=function(t){n.image=t.target.result,e.error=""},i.readAsDataURL(t)},onKeyDown:function(t){50<=this.second_name.length&&t.preventDefault()},passwordValidation:function(t){this.password1&&this.password1!=this.password2?this.passError="Пароли не совпадают.":this.passError=""},editProfile:function(){var t=this;try{if(this.password1&&this.password1!=this.password2)return void(this.error="Форма заполнена неверно.");if(this.passError="",this.error="Профиль обновляется...",this.file){var e=new FormData;console.log(e),this.$store.dispatch(w,{token:this.$store.getters.token,data:this.file}).then(function(e){t.error="Данные профиля изменены.",t.image="",t.file=""}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."})}e={profile:{}},this.password1&&(e.password=this.password1),e.is_get_notif_email=this.is_get_notif_email,this.first_name&&(e.profile.first_name=this.first_name),this.second_name&&(e.profile.second_name=this.second_name),this.patronymic&&(e.profile.patronymic=this.patronymic),this.position&&(e.profile.position=this.position),this.$store.dispatch(v,{token:this.$store.getters.token,data:e}).then(function(e){t.error="Данные профиля изменены.",t.password1="",t.password2="",t.first_name="",t.second_name="",t.patronymic="",t.position="",setTimeout(function(){t.error=""},5e3)}).catch(function(e){t.error="Ошибка. Что-то пошло не так."})}catch(e){console.log(e),this.error="Ошибка. Что-то пошло не так..."}}}};var St=Object(X.a)(kt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"editProfile"}},[i("div",[i("img",{ref:"img",attrs:{src:t.image||"https://img.icons8.com/wired/512/000000/document.png"}})]),t._v(" "),i("div",{staticStyle:{"margin-left":"25px"}},[t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("p"),t._v("Получать уведомления на почту"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.is_get_notif_email,expression:"is_get_notif_email"}],attrs:{type:"checkbox",name:"common","true-value":"true","false-value":"false"},domProps:{checked:Array.isArray(t.is_get_notif_email)?-1<t._i(t.is_get_notif_email,null):t._q(t.is_get_notif_email,"true")},on:{change:function(e){var i=t.is_get_notif_email,n=e.target,r=n.checked?"true":"false";if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.is_get_notif_email=i.concat([null])):-1<o&&(t.is_get_notif_email=i.slice(0,o).concat(i.slice(o+1)))}else t.is_get_notif_email=r}}}),t._v(" "),i("p",[t._v("Выбрать новый аватар")]),t._v(" "),i("input",{ref:"file",staticClass:"inputfile",attrs:{type:"file",id:"file",name:"file",accept:"image/*"},on:{change:t.onFileChange}}),t._v(" "),i("p",[t._v(t._s(t.upload))]),t._v(" "),i("form",{on:{submit:function(t){t.preventDefault()}}},[i("p",[t._v("Пароль")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"password",placeholder:"Введите новый пароль",autocomplete:"false",max:50},nativeOn:{keyup:function(e){return t.passwordValidation(e)}},model:{value:t.password1,callback:function(e){t.password1=e},expression:"password1"}}),t._v(" "),t.password1?i("div",[i("p",[t._v("Повторите пароль")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"password",max:50,placeholder:"Повторите пароль"},nativeOn:{keyup:function(e){return t.passwordValidation(e)}},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}}),t._v(" "),t.passError?i("p",{staticStyle:{color:"red",display:"inline-block",margin:"0","margin-left":"5px"}},[t._v(t._s(t.passError))]):t._e()],1):t._e(),t._v(" "),i("p",[t._v("Имя")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:50,placeholder:"Введите новое имя"},model:{value:t.first_name,callback:function(e){t.first_name=e},expression:"first_name"}}),t._v(" "),i("p",[t._v("Фамилия")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:50,placeholder:"Введите новую фамилию"},on:{keydown:t.onKeyDown},model:{value:t.second_name,callback:function(e){t.second_name=e},expression:"second_name"}}),t._v(" "),i("p",[t._v("Отчество")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:50,placeholder:"Введите новое отчество"},model:{value:t.patronymic,callback:function(e){t.patronymic=e},expression:"patronymic"}}),t._v(" "),i("p",[t._v("Должность")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:200,placeholder:"Введите новую должность"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}}),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{attrs:{type:"button"},on:{click:function(e){return t.editProfile()}}},[t._v("РЕДАКТИРОВАТЬ")]),t._v(" "),i("br")],1)])])},[],!1,function(t){i("Fnts")},"data-v-1d9bb691",null).exports,At=i("GQeE"),$t=i.n(At),Et={name:"grid",props:{id:String,columns:Array},data:function(){var t={};return this.columns.forEach(function(e){t[e]=1}),{h:null,sortKey:"",filterKey:"",sortOrders:t,error:"",commonActive:"1"}},created:function(){var t=this;this.$store.dispatch(y).then(function(e){t.$store.dispatch(P)})},computed:it()({},Object(nt.b)({getProfile:"getProfile",getDocs:"getDocs",getDocsOld:"getDocsOld"}),{disable:{get:function(){return this.$store.getters.getReload},set:function(t){this.$store.commit(V,!t)}},filteredHeroes:function(){var t={};this.columns.forEach(function(e){t[e]=1});var e=this.filterKey&&this.filterKey.toLowerCase(),i=(this.sortOrders[""],this.heroes||this.h);return e&&(i=i.filter(function(t){return $t()(t).some(function(i){return-1<String(t[i]).toLowerCase().indexOf(e)})})),i},heroes:function(){var t=this,e=this.$route.params.id,i=this.getDocs.filter(function(t){return 2!=t.status&&3!=t.status&&7!=t.status});if("all"==e)i=i;else if("common"==e)i=i.filter(function(t){return t.doc.common}),2==this.commonActive&&(i=i.filter(function(e){return e.user.id==t.getProfile.id})),3==this.commonActive&&(i=i.filter(function(e){return e.user.id!=t.getProfile.id})),i=i;else if("myDocs"==e)i=this.getDocs.filter(function(e){return e.user.id==t.getProfile.id&&0==e.status});else if("signature-request"==e)i=this.getDocs.filter(function(t){return 2==t.status});else if("signature-success"==e)i=this.getDocs.filter(function(t){return 6==t.status});else if("available-to-me"==e)i=this.getDocs.filter(function(t){return 5==t.status});else if("my-doc-signature-request"==e)i=this.getDocs.filter(function(e){return e.user.id==t.getProfile.id&&0==e.status&&!e.doc.signature_end});else if("notif"==this.id){var n=this.getDocsOld.filter(function(t){return 2==t.status||3==t.status||7==t.status});n.forEach(function(t){2==t.status?t.message="Вас просят подписать документ.":3==t.status?t.message="Ваш документ подписали.":7==t.status&&(t.message="Ваш документ отклонили.")}),i=n}else i=null;return i}}),filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{styleObject:function(t){return{"--button-background-color":t.rowBackg}},sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]},toDoc:function(t){var e=this;if("#dcdbfc"==t.rowBackg){var i=this.getProfile.id;this.$store.dispatch(E,{user:i,notif:t.id,pk3:0}).then(function(i){e.$router.push("/document/"+t.doc.id)}).catch(function(t){console.log(t),e.error="Ошибка. Что-то пошло не так."})}else"white"==t.rowBackg&&this.$store.dispatch(T,t.id).then(function(i){e.$router.push({name:"document",params:{id:t.doc.id.toString(),idNotif:t.id.toString()}})}).catch(function(t){console.log(t),e.error="Ошибка. Что-то пошло не так."})},hideNotif:function(t){var e=this,i=this.getProfile.id;this.$store.dispatch(E,{user:i,notif:this.filteredHeroes[t].id,pk3:1}).then(function(t){e.error=""}).catch(function(t){console.log(t),e.error="Ошибка. Что-то пошло не так."})}}};var Pt=Object(X.a)(Et,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"grid"}},[t.disable&&"notif"==t.id?i("div",{staticStyle:{color:"red","margin-left":"50px","margin-top":"50px"}},[t._v("Загрузка...")]):t._e(),t._v(" "),0==t.filteredHeroes.length&&"common"!=t.$route.params.id?i("div",{staticStyle:{"margin-left":"50px","margin-top":"50px"}},[i("p",[t._v("Так грустно... Здесь ничего нет.")]),t._v(" "),i("svg",{attrs:{fill:"#7cb0c1",height:"44",viewBox:"0 0 24 24",width:"44",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-3.54-4.54a5 5 0 0 1 7.08 0 1 1 0 0 1-1.42 1.42 3 3 0 0 0-4.24 0 1 1 0 0 1-1.42-1.42zM9 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm6 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"}})])]):t._e(),t._v(" "),0!=t.filteredHeroes.length||"common"==t.$route.params.id?i("div",{staticClass:"dataDiv"},[i("form",{staticClass:"search"},[i("p",{staticStyle:{display:"inline-block",margin:"0","margin-bottom":"15px","margin-right":"20px"}},[t._v("Поиск по всем столбцам")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filterKey,expression:"filterKey"}],attrs:{placeholder:"Введите что-то",name:"query"},domProps:{value:t.filterKey},on:{input:function(e){e.target.composing||(t.filterKey=e.target.value)}}})]),t._v(" "),"common"!=t.$route.params.id||t.disable?t._e():i("div",{staticStyle:{"margin-left":"35px","margin-bottom":"10px"}},[i("button",{class:[1==t.commonActive?"commonButton":""],on:{click:function(e){t.commonActive=1}}},[t._v("ВСЕ ДОКУМЕНТЫ")]),t._v(" "),i("button",{class:[2==t.commonActive?"commonButton":""],on:{click:function(e){t.commonActive=2}}},[t._v("МОИ ДОКУМЕНТЫ")]),t._v(" "),i("button",{class:[3==t.commonActive?"commonButton":""],on:{click:function(e){t.commonActive=3}}},[t._v("НЕ МОИ ДОКУМЕНТЫ")])]),t._v(" "),t.error?i("p",{staticStyle:{color:"red","margin-left":"35px"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("table",[i("thead",[i("tr",[t._l(t.columns,function(e,n){return i("th",{key:n,class:{active:t.sortKey==e},on:{click:function(i){return t.sortBy(e.title)}}},[t._v("\n                            "+t._s(t._f("capitalize")(e.title))+"\n                            "),i("span",{staticClass:"arrow",class:0<t.sortOrders[e]?"asc":"dsc"})])}),t._v(" "),"my-doc-signature-request"==t.$route.params.id?i("th",[t._v("КТО ПОДПИСЫВАЕТ")]):t._e(),t._v(" "),"notif"==t.id?i("th",{staticStyle:{padding:"0px 9px"}},[i("svg",{attrs:{height:"17px",viewBox:"0 0 33 33",width:"18px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])]):t._e()],2)]),t._v(" "),i("tbody",t._l(t.filteredHeroes,function(e,n){return i("tr",{key:n,staticClass:"rowData",class:{disabled:t.disable},style:t.styleObject(e)},[t._l(t.columns,function(n,r){return i("td",{key:r,on:{click:function(i){5!=r&&t.toDoc(e)}}},[t._v("\n                            "+t._s(e[n.key])+"\n                        ")])}),t._v(" "),"my-doc-signature-request"==t.$route.params.id?i("td",[t._v(t._s(e.initiator))]):t._e(),t._v(" "),"notif"==t.id?i("td",{staticStyle:{padding:"0px 2px"}},["notif"==t.id&&3==e.status?i("svg",{staticClass:"closeNotif",attrs:{height:"17px",viewBox:"0 0 33 33",width:"18px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){return t.hideNotif(n)}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("title",[t._v("Удалить уведомление")]),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z","fill-rule":"evenodd"}})])]):t._e()]):t._e()],2)}),0)])]):t._e()])},[],!1,function(t){i("W4rq")},"data-v-b0676830",null).exports,Mt={name:"adm",data:function(){return{self_id:this.$store.getters.getProfile.id,reg:"",regsNew:[],editRegName:[],isAddReg:"",fileCabinet:"",fileCabinetsNew:[],editFileCabinetName:[],isAddFileCab:!1,isAddUser:!1,users:[],email:"",is_staff:!1,error:"",error2:"",img:"",columns:[{name:"Пользователь",code:"full_name"},{name:"Email",code:"email"},{name:"Администратор",code:"is_staff"},{name:"Уведомления на почту",code:"is_get_notif_email"}]}},created:function(){var t=this;this.$store.dispatch(P),this.$store.dispatch(b);for(var e=0;e<this.fileCabinets.length;e++)this.editFileCabinetName.push(!1);for(var i=0;i<this.fileCabinets.length;i++)this.fileCabinetsNew.push(this.fileCabinets[i].name);this.$store.dispatch(p).then(function(e){t.users=e})},directives:{insertMessage:function(t,e,i){var n=t.getContext("2d");n.clearRect(0,0,100,100),n.fillStyle="#347090",n.font="80px Comic Sans MS",n.fillText(e.value,30,70);var r=i.context.$refs.canvas;i.context.img=r.toDataURL("image/png")}},computed:{filteredEvents:function(){var t=this;return this.users.filter(function(e){return t.self_id!=e.id})},fileCabinets:function(){return this.$store.getters.getFileCabinets},regs:function(){return this.$store.getters.getRegs}},methods:{addUser:function(){var t=this;if(0==(""==this.email?"":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/.test(this.email)))this.error2="Неправильный email.";else{this.error2="Пользователь создается...";var e=new FormData;console.log(this.email),e.append("email",this.email),this.is_staff?e.append("is_staff",!0):e.append("is_staff",!1),console.log(this.img),e.append("photo",this.img),this.$store.dispatch(c,e).then(function(e){t.email="",t.error2="Пользователь создан."}).catch(function(e){console.log(e),t.error2="Пользователь не создан. Такой пользователь уже существует."})}},addFileCabinet:function(){var t=this;this.$store.dispatch(j,this.fileCabinet).then(function(e){t.fileCabinet="",t.error="Картотека создана."}).catch(function(e){console.log(e),t.error="Картотека не создана. Что-то пошло не так."})},editNameFileCabinet:function(t){var e=this;this.$store.dispatch(G,{id:this.fileCabinets[t].id,name:this.fileCabinetsNew[t]}).then(function(i){e.editFileCabinetName[t]=!1,e.fileCabinetsNew.splice(t,1,"")}).catch(function(t){console.log(t),e.error="Имя не изменено. Что-то пошло не так."})},deleteFileCabinet:function(t){var e=this;return vt()(ht.a.mark(function i(){return ht.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,confirm('Вы уверены, что хотите удалить картотеку "'+e.fileCabinets[t].name+'"? Это действие также удалит все документы, которые есть в картотеке!',{title:"Подтверждение"});case 2:i.sent&&e.$store.dispatch(Z,{id:e.fileCabinets[t].id}).then(function(t){e.$store.commit(H,""),e.error="Картотека удалена."}).catch(function(t){e.error="Ошибка. Что-то пошло не так."});case 4:case"end":return i.stop()}},i,e)}))()},addReg:function(){var t=this;this.$store.dispatch(k,this.reg).then(function(e){t.reg="",t.error="Приставка создана."}).catch(function(e){console.log(e),t.error="Приставка не создана. Что-то пошло не так."})},editNameReg:function(t){var e=this;this.$store.dispatch(S,{id:this.regs[t].id,name:this.regsNew[t]}).then(function(i){e.editRegName[t]=!1,e.regsNew.splice(t,1,"")}).catch(function(t){console.log(t),e.error="Имя не изменено. Что-то пошло не так."})},deleteReg:function(t){var e=this;return vt()(ht.a.mark(function i(){return ht.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,confirm('Вы уверены, что хотите удалить приставку? "'+e.regs[t].name+'"? Это действие также удалит все документы с этой приставкой!',{title:"Подтверждение"});case 2:i.sent&&e.$store.dispatch(A,{id:e.regs[t].id}).then(function(t){e.error="Приставка удалена."}).catch(function(t){e.error="Ошибка. Что-то пошло не так."});case 4:case"end":return i.stop()}},i,e)}))()},editStaff:function(t){var e=this;this.$store.dispatch(g,{id:t.id,is_staff:t.is_staff}).catch(function(t){e.error="Ошибка. Что-то пошло не так."})},editNotif:function(t){var e=this;this.$store.dispatch(g,{id:t.id,is_get_notif_email:t.is_get_notif_email}).catch(function(t){e.error="Ошибка. Что-то пошло не так."})}}};var Lt=Object(X.a)(Mt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"adm"}},[t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("h3",[t._v("Управление приставками к регистрационным номерам")]),t._v(" "),i("table",[t._m(0),t._v(" "),i("tbody",[t._l(t.regs,function(e,n){return i("tr",{key:n},[i("td",[t.editRegName[n]?t._e():i("div",{staticClass:"editNameReg"},[t._v("\n                        "+t._s(e.name)+"\n                    ")]),t._v(" "),t.editRegName[n]?i("div",{staticClass:"editNameReg2"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.regsNew[n],expression:"regsNew[j]"}],staticStyle:{"min-width":"150px","margin-left":"-8px"},attrs:{type:"text",placeholder:"Картотека"},domProps:{value:t.regsNew[n]},on:{input:function(e){e.target.composing||t.$set(t.regsNew,n,e.target.value)}}}),t._v(" "),i("svg",{staticStyle:{"margin-left":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"22px",viewBox:"0 0 33 33",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.editRegName.splice(n,1,!1),t.regsNew.splice(n,1,t.regs[n].name)}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])]),t._v(" "),i("svg",{staticStyle:{"margin-left":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.editNameReg(n)}}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M6.3 12.3l10-10a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.4l-10 10a1 1 0 0 1-.7.3H7a1 1 0 0 1-1-1v-4a1 1 0 0 1 .3-.7zM8 16h2.59l9-9L17 4.41l-9 9V16zm10-2a1 1 0 0 1 2 0v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h6a1 1 0 0 1 0 2H4v14h14v-6z"}})])]):t._e()]),t._v(" "),i("td",[t.editRegName[n]?t._e():i("button",{staticStyle:{"margin-top":"0"},attrs:{type:"button"},on:{click:function(e){return t.editRegName.splice(n,1,!0)}}},[t._v("ПЕРЕИМЕНОВАТЬ")]),t._v(" "),i("button",{staticStyle:{"margin-top":"0"},attrs:{type:"button"},on:{click:function(e){return t.deleteReg(n)}}},[t._v("УДАЛИТЬ ПРИСТАВКУ")]),t._v(" "),i("br")])])}),t._v(" "),i("tr",[t.isAddReg?t._e():i("p",{staticClass:"addRegP",staticStyle:{margin:"0",padding:"10px","padding-left":"15px"},on:{click:function(e){t.isAddReg=!0}}},[t._v("Добавить приставку")])])],2)]),t._v(" "),t.isAddReg?i("form",{staticStyle:{"margin-bottom":"40px"},on:{submit:function(e){return e.preventDefault(),t.addReg(e)}}},[i("p",{staticClass:"addRegP",on:{click:function(e){t.isAddReg=!1}}},[t._v("Скрыть добавление приставки")]),t._v(" "),i("h3",[t._v("Создать приставку")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.reg,expression:"reg"}],attrs:{required:"",type:"text",placeholder:"Введите название картотеки"},domProps:{value:t.reg},on:{input:function(e){e.target.composing||(t.reg=e.target.value)}}}),t._v(" "),i("button",{attrs:{type:"submit"}},[t._v("СОЗДАТЬ")]),t._v(" "),i("br")]):t._e(),t._v(" "),i("div",{staticStyle:{"margin-bottom":"40px"}}),t._v(" "),i("hr"),t._v(" "),i("h3",[t._v("Управление картотеками")]),t._v(" "),i("table",[t._m(1),t._v(" "),i("tbody",[t._l(t.fileCabinets,function(e,n){return i("tr",{key:n},[i("td",[t.editFileCabinetName[n]?t._e():i("div",{staticClass:"editNameFileCabinet"},[t._v("\n                        "+t._s(e.name)+"\n                    ")]),t._v(" "),t.editFileCabinetName[n]?i("div",{staticClass:"editNameFileCabinet2"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.fileCabinetsNew[n],expression:"fileCabinetsNew[j]"}],staticStyle:{"min-width":"150px","margin-left":"-8px"},attrs:{type:"text",placeholder:"Картотека"},domProps:{value:t.fileCabinetsNew[n]},on:{input:function(e){e.target.composing||t.$set(t.fileCabinetsNew,n,e.target.value)}}}),t._v(" "),i("svg",{staticStyle:{"margin-left":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"22px",viewBox:"0 0 33 33",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.editFileCabinetName.splice(n,1,!1),t.fileCabinetsNew.splice(n,1,t.fileCabinets[n].name)}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])]),t._v(" "),i("svg",{staticStyle:{"margin-left":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.editNameFileCabinet(n)}}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M6.3 12.3l10-10a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.4l-10 10a1 1 0 0 1-.7.3H7a1 1 0 0 1-1-1v-4a1 1 0 0 1 .3-.7zM8 16h2.59l9-9L17 4.41l-9 9V16zm10-2a1 1 0 0 1 2 0v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h6a1 1 0 0 1 0 2H4v14h14v-6z"}})])]):t._e()]),t._v(" "),i("td",[t.editFileCabinetName[n]?t._e():i("button",{staticStyle:{"margin-top":"0"},attrs:{type:"button"},on:{click:function(e){return t.editFileCabinetName.splice(n,1,!0)}}},[t._v("ПЕРЕИМЕНОВАТЬ")]),t._v(" "),i("button",{staticStyle:{"margin-top":"0"},attrs:{type:"button"},on:{click:function(e){return t.deleteFileCabinet(n)}}},[t._v("УДАЛИТЬ КАРТОТЕКУ")]),t._v(" "),i("br")])])}),t._v(" "),i("tr",[t.isAddFileCab?t._e():i("p",{staticClass:"addFileCabP",staticStyle:{margin:"0",padding:"10px","padding-left":"15px"},on:{click:function(e){t.isAddFileCab=!0}}},[t._v("Добавить картотеку")])])],2)]),t._v(" "),t.isAddFileCab?i("form",{staticStyle:{"margin-bottom":"40px"},on:{submit:function(e){return e.preventDefault(),t.addFileCabinet(e)}}},[i("p",{staticClass:"addFileCabP",on:{click:function(e){t.isAddFileCab=!1}}},[t._v("Скрыть добавление картотеки")]),t._v(" "),i("h3",[t._v("Создать картотеку")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fileCabinet,expression:"fileCabinet"}],attrs:{required:"",type:"text",placeholder:"Введите название картотеки"},domProps:{value:t.fileCabinet},on:{input:function(e){e.target.composing||(t.fileCabinet=e.target.value)}}}),t._v(" "),i("button",{attrs:{type:"submit"}},[t._v("СОЗДАТЬ")]),t._v(" "),i("br")]):t._e(),t._v(" "),i("div",{staticStyle:{"margin-bottom":"40px"}}),t._v(" "),i("hr"),t._v(" "),i("h3",[t._v("Управление пользователями")]),t._v(" "),i("table",[i("thead",[i("tr",t._l(t.columns,function(e,n){return i("th",{key:n},[t._v("\n                    "+t._s(e.name)+"\n                ")])}),0)]),t._v(" "),i("tbody",[t._l(t.filteredEvents,function(e,n){return i("tr",{key:n},t._l(t.columns,function(n,r){return i("td",{key:r},["is_staff"==n.code?i("div",{staticClass:"editAdm"},[t._v("\n                        "+t._s(e[n.code])+"\n                        "),i("svg",{staticClass:"editStaff",attrs:{width:"42",height:"22",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(i){e[n.code]=!e[n.code],t.editStaff(e)}}},[i("g",[i("path",{attrs:{id:"svg_2",d:"m9.27039,21.301735l21.915211,0c5.075562,0 9.204388,-4.656818 9.204388,-10.381443s-4.128826,-10.381445 -9.204388,-10.381445l-21.915211,0c-5.07556,0 -9.204386,4.65682 -9.204386,10.381445s4.128826,10.381443 9.204386,10.381443zm0,-19.774178l21.915211,0c4.59211,0 8.327774,4.213385 8.327774,9.392735s-3.735664,9.392735 -8.327774,9.392735l-21.915211,0c-4.592112,0 -8.327778,-4.213383 -8.327778,-9.392735s3.735666,-9.392735 8.327778,-9.392735z"}}),t._v(" "),e[n.code]?t._e():i("path",{attrs:{id:"svg_3",d:"m10.851694,17.103909c3.539827,0 6.419889,-2.827057 6.419889,-6.301741s-2.880062,-6.301731 -6.419889,-6.301731s-6.419897,2.827055 -6.419897,6.301731s2.880064,6.301741 6.419897,6.301741zm0,-11.495476c2.917307,0 5.291121,2.33012 5.291121,5.193735s-2.373814,5.193739 -5.291121,5.193739s-5.291124,-2.330116 -5.291124,-5.193739s2.373245,-5.193735 5.291124,-5.193735z"}}),t._v(" "),e[n.code]?i("path",{attrs:{id:"svg_8",d:"m28.549137,17.339874c3.539829,0 6.419888,-2.827057 6.419888,-6.301739s-2.880058,-6.301733 -6.419888,-6.301733s-6.419895,2.827055 -6.419895,6.301733s2.880062,6.301739 6.419895,6.301739zm0,-11.495476c2.917309,0 5.291119,2.33012 5.291119,5.193737s-2.37381,5.193737 -5.291119,5.193737s-5.291126,-2.330116 -5.291126,-5.193737s2.373245,-5.193737 5.291126,-5.193737z"}}):t._e()])])]):"is_get_notif_email"==n.code?i("div",{staticClass:"editNotif"},[t._v("\n                        "+t._s(e[n.code])+"\n                        "),i("svg",{staticClass:"editNotif2",attrs:{width:"42",height:"22",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(i){e[n.code]=!e[n.code],t.editNotif(e)}}},[i("g",[i("path",{attrs:{id:"svg_2",d:"m9.27039,21.301735l21.915211,0c5.075562,0 9.204388,-4.656818 9.204388,-10.381443s-4.128826,-10.381445 -9.204388,-10.381445l-21.915211,0c-5.07556,0 -9.204386,4.65682 -9.204386,10.381445s4.128826,10.381443 9.204386,10.381443zm0,-19.774178l21.915211,0c4.59211,0 8.327774,4.213385 8.327774,9.392735s-3.735664,9.392735 -8.327774,9.392735l-21.915211,0c-4.592112,0 -8.327778,-4.213383 -8.327778,-9.392735s3.735666,-9.392735 8.327778,-9.392735z"}}),t._v(" "),e[n.code]?t._e():i("path",{attrs:{id:"svg_3",d:"m10.851694,17.103909c3.539827,0 6.419889,-2.827057 6.419889,-6.301741s-2.880062,-6.301731 -6.419889,-6.301731s-6.419897,2.827055 -6.419897,6.301731s2.880064,6.301741 6.419897,6.301741zm0,-11.495476c2.917307,0 5.291121,2.33012 5.291121,5.193735s-2.373814,5.193739 -5.291121,5.193739s-5.291124,-2.330116 -5.291124,-5.193739s2.373245,-5.193735 5.291124,-5.193735z"}}),t._v(" "),e[n.code]?i("path",{attrs:{id:"svg_8",d:"m28.549137,17.339874c3.539829,0 6.419888,-2.827057 6.419888,-6.301739s-2.880058,-6.301733 -6.419888,-6.301733s-6.419895,2.827055 -6.419895,6.301733s2.880062,6.301739 6.419895,6.301739zm0,-11.495476c2.917309,0 5.291119,2.33012 5.291119,5.193737s-2.37381,5.193737 -5.291119,5.193737s-5.291126,-2.330116 -5.291126,-5.193737s2.373245,-5.193737 5.291126,-5.193737z"}}):t._e()])])]):i("div",[t._v("\n                        "+t._s(e[n.code])+"\n                    ")])])}),0)}),t._v(" "),i("tr",[t.isAddUser?t._e():i("p",{staticClass:"addUserP",staticStyle:{margin:"0",padding:"10px","padding-left":"15px"},on:{click:function(e){t.isAddUser=!0}}},[t._v("Добавить пользователя")])])],2)]),t._v(" "),t.error2?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error2))]):t._e(),t._v(" "),t.isAddUser?i("form",{staticStyle:{"margin-bottom":"40px"},on:{submit:function(e){return e.preventDefault(),t.addUser(e)}}},[i("p",{staticClass:"addUserP",on:{click:function(e){t.isAddUser=!1}}},[t._v("Скрыть добавление пользователя")]),t._v(" "),i("h3",[t._v("Создать пользователя")]),t._v(" "),i("p",[t._v("Email того, кому нужно создать аккаунт")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{required:"",type:"email",placeholder:"Введите email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("canvas",{directives:[{name:"insert-message",rawName:"v-insert-message",value:t.email[0],expression:"email[0]"}],ref:"canvas",attrs:{width:"100",height:"100"}}),t._v(" "),i("img",{staticStyle:{display:"none"},attrs:{src:t.img}}),t._v(" "),i("p",{staticStyle:{display:"inline-block","padding-left":"15px","padding-right":"7px"}},[t._v(" Администратор")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.is_staff,expression:"is_staff"}],staticClass:"checkbox",attrs:{type:"checkbox",name:"common","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.is_staff)?-1<t._i(t.is_staff,null):t._q(t.is_staff,"1")},on:{change:function(e){var i=t.is_staff,n=e.target,r=n.checked?"1":"0";if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.is_staff=i.concat([null])):-1<o&&(t.is_staff=i.slice(0,o).concat(i.slice(o+1)))}else t.is_staff=r}}}),t._v(" "),i("br"),t._v(" "),i("button",{attrs:{type:"submit"}},[t._v("СОЗДАТЬ")]),t._v(" "),i("br")]):t._e()])},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Название")]),e("th",[this._v("Действия")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Название")]),e("th",[this._v("Действия")])])])}],!1,function(t){i("FHBk")},"data-v-77ea16e0",null).exports,Dt={name:"preview",props:{typeFile:{type:String,default:""}}};var Ft=Object(X.a)(Dt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"preview"}},[i("div",{staticClass:"bb0"}),t._v(" "),t._m(0),t._v(" "),i("div"),t._v(" "),i("p",[t._v(t._s(t.typeFile.toUpperCase()))]),t._v(" "),i("div")])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bb1"},[e("div",{staticClass:"bb2"})])}],!1,function(t){i("dVBu")},"data-v-06179349",null).exports,zt={name:"document",components:{Preview:Ft},props:{id:String},data:function(){return{file:"",doc:{status:"",user:{profile:{full_name:""}},doc:{id:"",title:"",size:"",file_cabinet:{name:""},common:"",description:"",date:"",signature:""}},title:"",type:"",fileWithSignature:"ddd",fileRepeat:"",error:"",errorConfirm:"",errorAddSign:"",isConfirm:!1,isCancelSign:!1,isRepeatSign:!1,titleRepeatFile:"",typeRepeatFile:"",checkSignature:!1,checkSignatureResult:"",confirm:"",confirmFromApp:"",cancelCause:"",cancelFile:"",refresh:"",repeatP:""}},created:function(){var t=this;this.refresh=!0,this.$store.dispatch(y).then(function(e){if(t.$store.getters.getDoc(t.id)){t.doc=t.$store.getters.getDoc(t.id);var i=t.doc.doc.title.split(".");t.type=i[i.length-1],t.title=t.doc.doc.title.replace("."+t.type,""),t.type=t.type.toLowerCase(),t.refresh=!1}else t.$router.push("/404")})},methods:{viewDoc:function(){var t=this;try{this.error="Открывается...",this.$store.dispatch(D,this.doc.doc.id).then(function(e){var i,n=Q+"/"+e.file;i="jpg"!=t.type&&"jpeg"!=t.type&&"png"!=t.type&&"pdf"!=t.type?"https://docs.google.com/viewerng/viewer?url="+n:n,window.open(i,"_blank"),t.error="Открылось!",setTimeout(function(){t.error=""},5e3)}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."})}catch(t){console.log(t),this.error="Ошибка. Что-то пошло не так."}},download:function(){var t=this;this.error="Скачивается...";var e=this.doc.doc.title;this.$store.dispatch(D,this.doc.doc.id).then(function(i){var n=document.createElement("a");n.href=Q+"/"+i.file,n.setAttribute("download",e),document.body.appendChild(n),n.click(),t.error="Скачано!",setTimeout(function(){t.error=""},5e3)}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."})},downloadSign:function(){var t=this;this.error="Скачивается...";var e=this.doc.doc.title;this.$store.dispatch(F,this.doc.doc.id).then(function(i){var n=document.createElement("a");n.href=Q+"/"+i.file,n.setAttribute("download",e),document.body.appendChild(n),n.click(),t.error="Скачано!",setTimeout(function(){t.error=""},5e3)}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."})},editDoc:function(){this.$router.push("/document/"+this.id+"/edit")},confirmCode:function(){this.confirmFromApp="1234",this.isConfirm=!0,this.isPreConfirm=!1},cancelSign:function(){var t=this;this.error="Документ отклоняется...";var e={cancel_description:this.cancelCause};this.cancelFile&&(e.cancel_file=this.cancelFile),this.$store.dispatch(U,{id:this.id,data:e}).then(function(e){t.refresh=!0,t.$store.dispatch(y).then(function(e){t.doc=t.$store.getters.getDoc(t.id),t.error="Документ отклонен. Через несколько секунд вы перейдете на главную страницу.",t.isConfirm=!1,t.confirmFromApp="",t.confirm="",t.refresh=!1,setTimeout(function(){t.error="",t.$router.push("/documents/all")},5e3)})}).catch(function(e){console.log(e),t.isConfirm=!1,t.confirm="",t.error="Ошибка. Что-то пошло не так."})},onFileChangeCancel:function(t){},onFileChangeRepeat:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){this.fileRepeat=e[0];var i=e[0].name.split(".");this.typeRepeatFile=i[i.length-1],this.titleRepeatFile=e[0].name.replace("."+this.typeRepeatFile,"")}},addSignature:function(){var t=this;this.errorAddSign="Ставим подпись...",this.$store.dispatch(R,{id:this.id,first:0}).then(function(e){t.refresh=!0,t.$store.dispatch(y).then(function(e){t.doc=t.$store.getters.getDoc(t.id),t.error="Подпись успешно поставлена!",t.isConfirm=!1,t.confirmFromApp="",t.confirm="",t.errorAddSign="",t.refresh=!1,setTimeout(function(){t.error=""},5e3)})}).catch(function(e){console.log(e),t.isConfirm=!1,t.confirm="",t.error="Ошибка. Что-то пошло не так."})},checkSign:function(){var t=this;this.error="Проверяем...",this.$store.dispatch(N,this.id).then(function(e){t.checkSignatureResult=e,t.checkSignature=!0,t.error=""})},repeatSignatures:function(){var t=this;this.repeatP="Цепочка запускается...";var e="";if(this.fileRepeat){e=new FormData;var i=new File([this.fileRepeat],this.titleRepeatFile+"."+this.typeRepeatFile,{type:this.fileRepeat.type});e.append("file",i),e.append("size",this.fileRepeat.size),e.append("title",this.titleRepeatFile+"."+this.typeRepeatFile)}this.$store.dispatch(O,{data:e,id:this.id}).then(function(e){t.refresh=!0,t.$store.dispatch(y).then(function(e){t.doc=t.$store.getters.getDoc(t.id),t.repeatP="",t.fileRepeat="",t.titleRepeatFile="",t.typeRepeatFile="",t.error="Цепочка запущена снова.",t.isRepeatSign=!1,t.refresh=!1,setTimeout(function(){t.error=""},5e3)})}).catch(function(e){console.log(e),t.isConfirm=!1,t.confirm="",t.error="Ошибка. Что-то пошло не так."})},deleteDoc:function(){var t=this;return vt()(ht.a.mark(function e(){return ht.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,confirm("Вы уверены, что хотите удалить документ?\nПримечание: если вы запретите создание этого окна в настройках браузера, вы не сможете удалить документ.",{title:"Подтверждение"});case 2:e.sent&&t.$store.dispatch(z,t.id).then(function(e){t.$router.push("/documents/all")}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."});case 4:case"end":return e.stop()}},e,t)}))()}}};var Tt=Object(X.a)(zt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"document"}},[t.refresh?i("div",[i("h3",[t._v("Загружается...")]),t._v(" "),i("svg",{staticStyle:{"enable-background":"new 0 0 30 30"},attrs:{id:"Layer_1",width:"80px",version:"1.1",viewBox:"0 0 30 30","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("path",{staticStyle:{fill:"#41A6F9"},attrs:{d:"M15,4C8.9,4,4,8.9,4,15s4.9,11,11,11s11-4.9,11-11S21.1,4,15,4z M21.7,16.8c-0.1,0.4-0.5,0.6-0.9,0.5l-5.6-1.1  c-0.2,0-0.4-0.2-0.6-0.3C14.2,15.7,14,15.4,14,15c0,0,0,0,0,0l0.2-8c0-0.5,0.4-0.8,0.8-0.8c0.4,0,0.8,0.4,0.8,0.8l0.1,6.9l5.2,1.8  C21.6,15.8,21.8,16.3,21.7,16.8z"}})])]):i("div",[i("div",{staticClass:"buttons"},[0==t.doc.status&&t.doc.user.id==this.$store.getters.getProfile.id?i("button",{on:{click:function(e){return t.editDoc()}}},[t._v("РЕДАКТИРОВАТЬ ИНФОРМАЦИЮ О ФАЙЛЕ")]):t._e(),t._v(" "),0==t.doc.status&&t.doc.user.id==this.$store.getters.getProfile.id?i("button",{on:{click:function(e){t.isRepeatSign=!0}}},[t._v("ИЗМЕНИТЬ ФАЙЛ/ПЕРЕЗАПУСТИТЬ ЦЕПОЧКУ ПОДПИСЕЙ")]):t._e()]),t._v(" "),i("div",{staticClass:"document2Colon"},[i("div",[i("preview",{attrs:{typeFile:t.type}}),t._v(" "),this.$store.getters.getProfile.is_staff||0==t.doc.status&&(1!=t.doc.doc.common||t.doc.user.id==this.$store.getters.getProfile.id)?i("button",{staticStyle:{"margin-top":"20px","margin-left":"6px",background:"rgb(243, 92, 92)"},on:{click:function(e){return t.deleteDoc()}}},[t._v("УДАЛИТЬ")]):t._e()],1),t._v(" "),i("div",{staticStyle:{"margin-left":"25px","margin-top":"0px"}},[i("h3",{staticClass:"header"},[t._v("\n\t\t\t\t\t"+t._s(t.title)+"\n\t\t\t\t\t"),t.doc.doc.common?i("svg",{staticStyle:{"margin-left":"5px"},attrs:{width:"20px",fill:"#347090","enable-background":"new 0 0 24 24",id:"Layer_1",version:"1.0",viewBox:"0 0 24 24","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("title",[t._v("Общий доступ")]),t._v(" "),i("g",[i("path",{attrs:{d:"M9,9c0-1.7,1.3-3,3-3s3,1.3,3,3c0,1.7-1.3,3-3,3S9,10.7,9,9z M12,14c-4.6,0-6,3.3-6,3.3V19h12v-1.7C18,17.3,16.6,14,12,14z   "}})]),i("g",[i("g",[i("circle",{attrs:{cx:"18.5",cy:"8.5",r:"2.5"}})]),i("g",[i("path",{attrs:{d:"M18.5,13c-1.2,0-2.1,0.3-2.8,0.8c2.3,1.1,3.2,3,3.2,3.2l0,0.1H23v-1.3C23,15.7,21.9,13,18.5,13z"}})])]),i("g",[i("g",[i("circle",{attrs:{cx:"18.5",cy:"8.5",r:"2.5"}})]),i("g",[i("path",{attrs:{d:"M18.5,13c-1.2,0-2.1,0.3-2.8,0.8c2.3,1.1,3.2,3,3.2,3.2l0,0.1H23v-1.3C23,15.7,21.9,13,18.5,13z"}})])]),i("g",[i("g",[i("circle",{attrs:{cx:"5.5",cy:"8.5",r:"2.5"}})]),i("g",[i("path",{attrs:{d:"M5.5,13c1.2,0,2.1,0.3,2.8,0.8c-2.3,1.1-3.2,3-3.2,3.2l0,0.1H1v-1.3C1,15.7,2.1,13,5.5,13z"}})])])]):t._e()]),t._v(" "),t.doc.doc.cancel_description?i("p",{staticStyle:{color:"red"}},[t._v('\n\t\t\t\t\tВаш документ отказались подписывать. Посмотрите комментарий отказа и \n\t\t\t\t\tнажмите кнопку "Запустить цепочку подписей снова". Выберите в появившемся \n\t\t\t\t\tокне новый документ (необязательно) и нажмите "Подтвердить", чтобы запустить \n\t\t\t\t\tцепочку подписей.\n\t\t\t\t')]):t._e(),t._v(" "),t.doc.doc.cancel_description?i("p",[t._v("Комментарий отказа: "+t._s(t.doc.doc.cancel_description))]):t._e(),t._v(" "),t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("table",{staticClass:"aboutDoc"},[t._m(0),t._v(" "),i("tbody",[i("tr",[i("td",[t._v("Регистрационный номер")]),t._v(" "),i("td",[t._v(t._s(t.doc.reg))])]),t._v(" "),i("tr",[i("td",[t._v("Владелец")]),t._v(" "),i("td",[t._v(t._s(t.doc.user.profile.full_name)+" ("+t._s(t.doc.user.email)+")")])]),t._v(" "),i("tr",[i("td",[t._v("Картотека")]),t._v(" "),i("td",[t._v(t._s(t.doc.doc.file_cabinet.name))])]),t._v(" "),i("tr",[i("td",[t._v("Дата добавления")]),t._v(" "),i("td",[t._v(t._s(t.doc.doc.date))])]),t._v(" "),i("tr",[i("td",[t._v("Описание")]),t._v(" "),i("td",[t._v(t._s(t.doc.doc.description))])]),t._v(" "),i("tr",[i("td",[t._v("Размер файла")]),t._v(" "),i("td",[t._v(t._s(Math.round(t.doc.doc.size/1024/1024*1e3)/1e3)+" Мб")])]),t._v(" "),i("tr",[i("td",[t._v("Файл")]),t._v(" "),i("td",[t.doc.doc.size/1024/1024<25?i("button",{on:{click:function(e){return t.viewDoc()}}},[t._v("СМОТРЕТЬ")]):t._e(),t._v(" "),i("button",{on:{click:function(e){return t.download()}}},[t._v("СКАЧАТЬ")])])]),t._v(" "),i("tr",[i("td",[t._v("Подпись")]),t._v(" "),i("td",[i("button",{on:{click:function(e){return t.checkSign()}}},[t._v("ПРОВЕРИТЬ НА ДОСТОВЕРНОСТЬ")]),t._v(" "),i("button",{on:{click:function(e){return t.downloadSign()}}},[t._v("СКАЧАТЬ ПОДПИСЬ")]),t._v(" "),2==t.doc.status?i("button",{on:{click:function(e){t.isConfirm=!0}}},[t._v("ПОДПИСАТЬ/ОТКЛОНИТЬ")]):t._e(),t._v(" "),i("br"),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.doc.doc.signature)+"\n\t\t\t\t\t\t\t")])])])]),t._v(" "),t.checkSignature?i("div",{staticClass:"checkSignature"},[i("p",[t._v(t._s(t.checkSignatureResult))]),t._v(" "),i("div",{staticClass:"confirmButtons"},[i("div"),t._v(" "),i("button",{on:{click:function(e){t.checkSignature=!1,t.checkSignatureResult=""}}},[t._v("ОК")]),t._v(" "),i("div")])]):t._e(),t._v(" "),t.isConfirm?i("div",{staticClass:"confirm"},[i("div",{staticStyle:{display:"grid","grid-template-columns":"auto max-content"}},[i("div"),t._v(" "),i("svg",{staticStyle:{"margin-right":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"22px",viewBox:"0 0 33 33",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.isConfirm=!1}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])]),t._v(" "),i("p",{staticStyle:{margin:"0"}},[t._v("\n\t\t\t\t\t\tПросмотрите документ с помощью кнопок СМОТРЕТЬ ДОКУМЕНТ (если документ меньше 25мб) \n\t\t\t\t\t\tили СКАЧАТЬ. Примите решение, поставить подпись или отклонить документ.\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"signButtons",staticStyle:{"margin-top":"5px"}},[i("div"),t._v(" "),i("button",{staticStyle:{background:"rgb(243, 92, 92)"},on:{click:function(e){t.isCancelSign=!0,t.isPreConfirm=!1}}},[t._v("ОТКЛОНИТЬ")]),t._v(" "),i("button",{on:{click:function(e){return t.addSignature()}}},[t._v("ПОСТАВИТЬ ПОДПИСЬ")]),t._v(" "),i("br")]),t._v(" "),t.errorAddSign?i("p",{staticStyle:{color:"red","text-align":"center",padding:"5px",width:"100%"}},[t._v(t._s(t.errorAddSign))]):t._e()]):t._e(),t._v(" "),t.isCancelSign?i("div",{staticClass:"confirm",staticStyle:{height:"380px"},on:{submit:function(e){return e.preventDefault(),t.cancelSign(e)}}},[i("div",{staticStyle:{display:"grid","grid-template-columns":"auto max-content"}},[i("div"),t._v(" "),i("svg",{staticStyle:{"margin-right":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"22px",viewBox:"0 0 33 33",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.isCancelSign=!1}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])]),t._v(" "),i("p",{staticStyle:{"margin-top":"0"}},[t._v("\n\t\t\t\t\t\tНапишите, почему документ отклонен. Вы также можете загрузить исправленный документ \n\t\t\t\t\t\t(не обязательно). Тот, кто просил вас поставить подпись, сможет просмотреть ваш \n\t\t\t\t\t\tвариант документа. \n\t\t\t\t\t")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cancelCause,expression:"cancelCause"}],attrs:{placeholder:"Введите комментарий"},domProps:{value:t.cancelCause},on:{input:function(e){e.target.composing||(t.cancelCause=e.target.value)}}}),t._v(" "),i("input",{staticClass:"cancelFile",attrs:{type:"file",id:"file",name:"file"},on:{change:t.onFileChangeCancel}}),t._v(" "),i("div",{staticClass:"confirmButtons"},[i("div"),t._v(" "),i("button",{on:{click:function(e){return t.cancelSign()}}},[t._v("ОТКЛОНИТЬ И ОТПРАВИТЬ КОММЕНТАРИЙ")]),t._v(" "),i("div")]),t._v(" "),t.errorConfirm?i("p",{staticStyle:{color:"red","text-align":"center",padding:"5px"}},[t._v(t._s(t.errorConfirm))]):t._e()]):t._e(),t._v(" "),t.isRepeatSign?i("div",{staticClass:"confirm"},[i("div",{staticStyle:{display:"grid","grid-template-columns":"auto max-content"}},[i("div"),t._v(" "),i("svg",{staticStyle:{"margin-right":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"22px",viewBox:"0 0 33 33",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.isRepeatSign=!1,t.fileRepeat="",t.titleRepeatFile=""}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])]),t._v(" "),i("p",{staticStyle:{margin:"0"}},[t._v('\n\t\t\t\t\t\tЗагрузите новый файл (необязательно) и нажмите "ПЕРЕЗАПУСТИТЬ".\n\t\t\t\t\t')]),t._v(" "),i("input",{staticClass:"cancelFile",attrs:{type:"file",id:"file",name:"file"},on:{change:t.onFileChangeRepeat}}),t._v(" "),t.titleRepeatFile?i("input",{directives:[{name:"model",rawName:"v-model",value:t.titleRepeatFile,expression:"titleRepeatFile"}],staticClass:"code",staticStyle:{"margin-top":"15px"},attrs:{type:"text",placeholder:"Имя файла"},domProps:{value:t.titleRepeatFile},on:{input:function(e){e.target.composing||(t.titleRepeatFile=e.target.value)}}}):t._e(),t._v(" "),i("p",{staticStyle:{"padding-top":"0","padding-bottom":"0"}},[t._v(t._s(t.repeatP))]),t._v(" "),i("div",{staticClass:"confirmButtons"},[i("div"),t._v(" "),i("button",{on:{click:function(e){return t.repeatSignatures()}}},[t._v("ПЕРЕЗАПУСТИТЬ")]),t._v(" "),i("div")])]):t._e()])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th"),e("th")])])}],!1,function(t){i("GL/P")},"data-v-7a60a7a5",null).exports,Rt={name:"editDocument",components:{Preview:Ft},props:{id:String},data:function(){return{file:"",doc:{},title:"",type:"",description:"",common:!1,error:"",regs:[],reg:"",fileCabinets:[],file_cabinet:""}},created:function(){this.$store.getters.getDoc(this.id)||this.$router.push("/documents/all"),this.doc=this.$store.getters.getDoc(this.id);var t=this.doc.doc.title.split(".");this.type=t[t.length-1],this.title=this.doc.doc.title.replace("."+this.type,""),this.type=this.type.toLowerCase(),this.description=this.doc.doc.description,this.common=this.doc.doc.common,this.fileCabinets=this.$store.getters.getFileCabinets,this.file_cabinet=this.doc.doc.file_cabinet,this.$store.dispatch(b),this.regs=this.$store.getters.getRegs,this.reg=this.doc.doc.reg},methods:{editDoc:function(){var t=this,e={id:this.id,title:this.title+"."+this.type,description:this.description,common:this.common,file_cabinet_id:this.file_cabinet.id,reg_id:this.reg.id};this.$store.dispatch(q,e).then(function(e){t.$router.push("/document/"+t.id)}).catch(function(e){console.log(e),t.error="Что-то пошло не так."})}}};var Nt=Object(X.a)(Rt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"editDocument"}},[i("div",{staticClass:"document2Colon"},[i("div",[i("preview",{attrs:{typeFile:t.type}})],1),t._v(" "),i("form",{staticStyle:{"margin-left":"25px","margin-top":"-15px"},on:{submit:function(e){return e.preventDefault(),t.editDoc(e)}}},[t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("p",[t._v("Название")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"code",attrs:{type:"text",placeholder:"Введите название"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("p",[t._v("Приставка к регистрационному номеру")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.reg,expression:"reg"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.reg=e.target.multiple?i:i[0]}}},t._l(t.regs,function(e,n){return i("option",{key:n,domProps:{value:e}},[t._v(t._s(e.name))])}),0),t._v(" "),i("p",[t._v("Картотека")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.file_cabinet,expression:"file_cabinet"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.file_cabinet=e.target.multiple?i:i[0]}}},t._l(t.fileCabinets,function(e,n){return i("option",{key:n,domProps:{value:e}},[t._v(t._s(e.name))])}),0),t._v(" "),i("p",[t._v("Описание")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{placeholder:"Введите описание"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),i("p"),t._v(" Общий доступ "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.common,expression:"common"}],attrs:{type:"checkbox","true-value":"true","false-value":"false"},domProps:{checked:Array.isArray(t.common)?-1<t._i(t.common,null):t._q(t.common,"true")},on:{change:function(e){var i=t.common,n=e.target,r=n.checked?"true":"false";if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.common=i.concat([null])):-1<o&&(t.common=i.slice(0,o).concat(i.slice(o+1)))}else t.common=r}}}),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{attrs:{type:"submit"}},[t._v("РЕДАКТИРОВАТЬ")]),t._v(" "),i("br")])])])},[],!1,function(t){i("zN2z")},"data-v-7976b13f",null).exports,Ut=i("MQ60"),Ot={name:"account",components:{Preview:Ft,draggable:i.n(Ut).a},data:function(){return{title:"",typeFile:!1,description:"",selectedUser:"",selectedUsers:[],selectedUser2:"",selectedUsers2:[],selectedUsers20:[],users:[],common:0,selfSignature:0,error:null,file:"",disable:!0,reg:"",fileCabinets:[],file_cabinet:""}},created:function(){var t=this;this.$store.dispatch(f).then(function(e){t.users=e.filter(function(e){return e.id!=t.$store.getters.getProfile.id})}),this.fileCabinets=this.$store.getters.getFileCabinets,this.file_cabinet=this.$store.getters.getFileCabinet,this.$store.dispatch(b)},computed:{regs:function(){return this.$store.getters.getRegs}},methods:{onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){this.file=e[0];var i=e[0].name.split(".");this.typeFile=i[i.length-1],this.title=e[0].name.replace("."+this.typeFile,""),this.file=e[0],this.disable=!1}},blobToFile:function(t,e){return t.lastModifiedDate=new Date,t.name=e,t},addUser:function(t){var e=this;1==t?""!=this.selectedUser&&(this.selectedUsers.push(this.selectedUser),this.users=this.users.filter(function(t){return t!=e.selectedUser}),this.selectedUser=""):2==t&&""!=this.selectedUser2&&(this.selectedUsers2.push(this.selectedUser2),this.users=this.users.filter(function(t){return t!=e.selectedUser2}),this.selectedUser2="")},deleteSelectedUser:function(t,e){1==t?this.selectedUsers=this.selectedUsers.filter(function(t){return t!=e}):2==t&&(this.selectedUsers2=this.selectedUsers2.filter(function(t){return t!=e})),this.users.push(e)},addDoc:function(){var t=this;this.disable=!0,this.error="Загружается...";var e=new FormData;if(this.file){var i=new File([this.file],this.title+"."+this.typeFile,{type:this.file.type});e.append("file",i),e.append("size",this.file.size)}e.append("user_id",this.$store.getters.getProfile.id),this.title&&e.append("title",this.title+"."+this.typeFile),this.description&&e.append("description",this.description),this.file_cabinet&&e.append("file_cabinet_id",this.file_cabinet.id),this.reg&&e.append("reg_id",this.reg.id),e.common=this.common?e.append("common",!0):e.append("common",!1);var n={d:e};this.selectedUsers&&(n.signature_request=this.selectedUsers),this.selectedUsers2&&(n.show_request=this.selectedUsers2),n.selfSignature=this.selfSignature,this.$store.dispatch(L,n).then(function(e){t.error="Загружено!",t.$router.push({name:"document",params:{id:e.doc.id.toString()}})}).catch(function(e){console.log(e),t.disable=!1,t.error="Ошибка. Что-то пошло не так."})}}};var qt=Object(X.a)(Ot,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"addDoc"}},[i("h3",{staticClass:"header"},[t._v("ДОБАВЛЕНИЕ ДОКУМЕНТА")]),t._v(" "),i("div",{staticClass:"addDoc2Colon"},[i("div",{staticClass:"img"},[t.typeFile?i("preview",{attrs:{typeFile:t.typeFile}}):i("img",{attrs:{src:"https://img.icons8.com/wired/512/000000/document.png"}})],1),t._v(" "),i("div",{staticStyle:{"margin-left":"25px"}},[i("form",{on:{submit:function(e){return e.preventDefault(),t.addDoc(e)}}},[i("input",{attrs:{type:"file",id:"file",name:"file"},on:{change:t.onFileChange}}),t._v(" "),i("p",[t._v("Имя файла")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"filename",attrs:{required:"",type:"text",placeholder:"Введите имя",autocomplete:"usernameNew"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("p",[t._v("Приставка к регистрационному номеру")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.reg,expression:"reg"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.reg=e.target.multiple?i:i[0]}}},t._l(t.regs,function(e,n){return i("option",{key:n,domProps:{value:e}},[t._v(t._s(e.name))])}),0),t._v(" "),i("p",[t._v("Картотека")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.file_cabinet,expression:"file_cabinet"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.file_cabinet=e.target.multiple?i:i[0]}}},t._l(t.fileCabinets,function(e,n){return i("option",{key:n,domProps:{value:e}},[t._v(t._s(e.name))])}),0),t._v(" "),i("div",{staticStyle:{border:"1px solid #347090","border-radius":"3px",padding:"15px","margin-top":"10px"}},[i("p",{staticStyle:{"margin-top":"0px"}},[t._v("Запросить подпись. Порядок выбранных пользователей можно менять перетаскиванием.")]),t._v(" "),i("draggable",{model:{value:t.selectedUsers,callback:function(e){t.selectedUsers=e},expression:"selectedUsers"}},t._l(t.selectedUsers,function(e){return i("div",{key:e.id,staticClass:"selectedUserWithCancel"},[i("p",{staticClass:"selectedUser"},[t._v(t._s(e.full_name)+" - "+t._s(e.position))]),t._v(" "),i("svg",{staticClass:"deleteSelectedUser",attrs:{height:"21px",viewBox:"0 0 31 32",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(i){return t.deleteSelectedUser(1,e)}}},[i("g",{attrs:{id:"Cancel",stroke:"#347090","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])])}),0),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedUser,expression:"selectedUser"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedUser=e.target.multiple?i:i[0]}}},t._l(t.users,function(e){return i("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.full_name)+" - "+t._s(e.position))])}),0),t._v(" "),i("button",{attrs:{type:"button"},on:{click:function(e){return t.addUser(1)}}},[t._v("ДОБАВИТЬ")]),t._v(" "),i("br")],1),t._v(" "),i("div",{staticStyle:{border:"1px solid #347090","border-radius":"3px",padding:"15px","margin-top":"10px"}},[i("p",{staticStyle:{"margin-top":"0"}},[t._v("\n                            Пользователи, у которых были запрошены подписи, могут просматривать документ. \n                            Ниже можно указать дополнительных пользователей, которые не должны подписывать документ, \n                            но могут его просматривать. Порядок выбранных пользователей можно менять перетаскиванием.\n                        ")]),t._v(" "),i("draggable",{model:{value:t.selectedUsers2,callback:function(e){t.selectedUsers2=e},expression:"selectedUsers2"}},t._l(t.selectedUsers2,function(e){return i("div",{key:e.id,staticClass:"selectedUserWithCancel"},[i("p",{staticClass:"selectedUser"},[t._v(t._s(e.full_name)+" - "+t._s(e.position))]),t._v(" "),i("svg",{staticClass:"deleteSelectedUser",attrs:{height:"21px",viewBox:"0 0 31 32",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(i){return t.deleteSelectedUser(2,e)}}},[i("g",{attrs:{id:"Cancel",stroke:"#347090","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])])}),0),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedUser2,expression:"selectedUser2"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedUser2=e.target.multiple?i:i[0]}}},t._l(t.users,function(e){return i("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.full_name)+" - "+t._s(e.position))])}),0),t._v(" "),i("button",{attrs:{type:"button"},on:{click:function(e){return t.addUser(2)}}},[t._v("ДОБАВИТЬ")]),t._v(" "),i("br")],1),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("p",[t._v("Описание")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{placeholder:"Опишите документ"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),i("p"),t._v(" Общий доступ "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.common,expression:"common"}],attrs:{type:"checkbox",name:"common","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.common)?-1<t._i(t.common,null):t._q(t.common,"1")},on:{change:function(e){var i=t.common,n=e.target,r=n.checked?"1":"0";if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.common=i.concat([null])):-1<o&&(t.common=i.slice(0,o).concat(i.slice(o+1)))}else t.common=r}}}),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{class:{disabled:this.disable},staticStyle:{"margin-bottom":"50px"},attrs:{type:"submit"}},[t._v("СОЗДАТЬ")]),t._v(" "),i("br")]),t._v(" "),t.error?i("p",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.error)+" ")]):t._e()])])])},[],!1,function(t){i("5Pnk")},"data-v-d4a2f00c",null).exports;var It=Object(X.a)({name:"notFound"},function(){this.$createElement;return this._self._c,this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"notFound"}},[e("p",[this._v("Не найдено.")])])}],!1,function(t){i("oxa4")},"data-v-d0d7d2a2",null).exports,Bt={name:"Help",data:function(){return{help:help}}};var Ht,jt,Gt,Zt,Vt=Object(X.a)(Bt,function(){this.$createElement;return this._self._c,this._m(0)},[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"help"}},[i("h2",[t._v("Помощь")]),t._v(" "),i("h4",[t._v("Переход на главную страницу")]),t._v(" "),i("p",[t._v('\n\t\tНажмите на логотип "СЭД МТУСИ".\n\t')]),t._v(" "),i("h4",[t._v("Создание документа")]),t._v(" "),i("p",[t._v("\n\t\tНажмите на иконку создания документа со знаком плюса, которая расположена \n\t\tв панели сверху, с правой стороны.\n\t")]),t._v(" "),i("h4",[t._v("Изменение картотеки")]),t._v(" "),i("p",[t._v("\n\t\tКартотеку можно поменять в меню главной страницы. Уведомления отображаются \n\t\tнезависимо от картотеки.\n\t")]),t._v(" "),i("h4",[t._v("Просмотр документа")]),t._v(" "),i("p",[t._v("\n\t\tПросматрировать содержимое можно только у документов размером меньше 25мб.\n\t")]),t._v(" "),i("h4",[t._v("Профиль")]),t._v(" "),i("p",[t._v("\n\t\tПрофиль позволяет просматривать уведомления, изменять личную информацию, \n\t\tвыйти из аккаунта и, в случае администратора, управлять правами пльзователей.\n\t\tЗайти в профиль можно, кликнув на круглую иконку с картинкой вашего профиля \n\t\tв панели сверху, с правой стороны.\n\t")]),t._v(" "),i("h4",[t._v("Уведомления")]),t._v(" "),i("p",[t._v("\n\t\tУведомления можно посмотреть в профиле или кликнув на иконку с колокольчиком в \n\t\tпанели сверху, с правой стороны.\n\t")]),t._v(" "),i("h4",[t._v("Администрирование")]),t._v(" "),i("p",[t._v('\n\t\tЧерез вкладку в профиле "Администрирование" (присутствует, если пользователь \n\t\tявляется администратором) можно добавлять новых пользователей по их email, а \n\t\tтакже изменять права (администратор или нет). Для изменения права достаточно \n\t\tнайти в таблице нужного пользователя и кликнуть по иконке в столбце "Администратор".\n\t')]),t._v(" "),i("p",[t._v("\n\t\tТакже здесь можно управлять картотеками и приставками к регистрационным номерам \n\t\t(создавать, переименовывать, удалять).\n\t")])])}],!1,function(t){i("xuLB")},"data-v-788db6dd",null).exports,Kt=i("YEIV"),Wt=i.n(Kt),Qt={state:{profile:{},users:[],photo:""},getters:{getProfile:function(t){return t.profile},getPhoto:function(t){return t.photo},getUsers:function(t){return t.users},isProfileLoaded:function(t){return!!t.profile.name}},actions:(Ht={},Wt()(Ht,u,function(t){var e=t.commit,i=t.dispatch,n=t.rootState;return new o.a(function(t,r){ct.a.get(Q+"/api/users/get_user_from_token/",{headers:{Authorization:"Token "+n.auth.token}}).then(function(n){e(h,n.data[0]),i(C),t()}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}i(s)})})}),Wt()(Ht,p,function(t){t.commit,t.dispatch;var e=t.rootState;return new o.a(function(t,i){ct.a.get(Q+"/api/users/i",{headers:{Authorization:"Token "+e.auth.token}}).then(function(e){e.data.forEach(function(t){t.full_name=t.profile.full_name}),t(e.data)}).catch(function(t){try{i(t.response.request.response)}catch(e){i(t)}})})}),Wt()(Ht,f,function(t){return t.commit,t.dispatch,t.rootState,new o.a(function(t,e){ct.a.get(Q+"/api/users/emails/").then(function(e){t(e.data)}).catch(function(t){try{e(t.response.request.response)}catch(i){e(t)}})})}),Wt()(Ht,v,function(t,e){var i=t.commit;return t.dispatch,new o.a(function(t,n){ct.a.get(Q+"/api/users/get_user_from_token/",{headers:{Authorization:"Token "+e.token}}).then(function(r){ct.a.patch(Q+"/api/users/i/"+r.data[0].id,e.data,{headers:{Authorization:"Token "+e.token}}).then(function(e){i(h,e.data),t(e)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Ht,C,function(t){var e=t.commit,i=(t.dispatch,t.rootState);return new o.a(function(t,n){ct.a.get(Q+"/api/users/"+i.user.profile.id+"/photo/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(i){e(x,i.data.photo),t(i.data.photo)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Ht,w,function(t,e){t.commit;var i=t.dispatch,n=t.state;return new o.a(function(t,r){ct.a.patch(Q+"/api/users/i/"+n.profile.id,e.data,{headers:{Authorization:"Token "+e.token,"Content-Type":"multipart/form-data"}}).then(function(e){i(C),t(e)}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Ht,g,function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){var r=e.id;delete e.id,ct.a.patch(Q+"/api/users/i/"+r,e,{headers:{Authorization:"Token "+i.auth.token}}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Ht,m,function(t,e){return t.commit,t.dispatch,new o.a(function(t,i){ct.a.post(Q+"/api/users/rest_auth/password/reset/",{email:e}).then(function(e){t(e)}).catch(function(t){try{i(t.response.request.response)}catch(e){i(t)}})})}),Wt()(Ht,_,function(t,e){return t.commit,t.dispatch,new o.a(function(t,i){console.log(e),ct.a.post(Q+"/api/users/rest_auth/password/reset/confirm/",{uid:e.uid,token:e.token,new_password1:e.password1,new_password2:e.password2}).then(function(e){t(e)}).catch(function(t){try{i(t.response.request.response)}catch(e){i(t)}})})}),Ht),mutations:(jt={},Wt()(jt,h,function(t,e){n.a.set(t,"profile",e)}),Wt()(jt,x,function(t,e){e=e.replace("\\","/"),n.a.set(t,"photo",Q+"/"+e)}),jt)},Jt={state:{token:localStorage.getItem("user-token")||"",auth:""},getters:{token:function(t){return t.token},auth:function(t){return t.auth},isAuthenticated:function(t){return!!t.token}},actions:(Gt={},Wt()(Gt,c,function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){console.log(e),ct.a.post(Q+"/api/users/send_invite/",e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Token "+i.auth.token}}).then(function(e){console.log(e.data),t(e.data.password)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Gt,l,function(t,e){var i=t.commit,n=t.dispatch;return t.rootState,new o.a(function(t,r){ct.a.post(Q+"/api/users/get_auth_token/",{email:e.email,password:e.password}).then(function(e){var r=e.data.token;i(a,e.data),localStorage.setItem("user-token",r),ct.a.defaults.headers.common.Authorization=r,n(u).then(function(){i(H,""),i(I,""),n(y).then(function(){i(d,!0),t(e)})})}).catch(function(t){localStorage.removeItem("user-token");try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Gt,s,function(t){var e=t.commit;return t.dispatch,new o.a(function(t,i){e(s),localStorage.removeItem("user-token"),delete ct.a.defaults.headers.common.Authorization,t()})}),Gt),mutations:(Zt={},Wt()(Zt,a,function(t,e){t.token=e.token}),Wt()(Zt,d,function(t,e){t.auth=e}),Wt()(Zt,s,function(t){t.token="",t.profile={},t.auth=!1}),Zt)};function Xt(t){var e=(t=new Date(t)).getFullYear(),i=t.getMonth()+1,n=i<10?"0"+i:i,r=t.getDate(),o=r<10?"0"+r:r,s=t.getHours(),a=t.getMinutes();return o+"-"+n+"-"+e+" "+s+":"+(a<10?"0"+a:a)}var Yt,te,ee,ie={state:{docs:[],docsFiltering:[],fileCabinets:[],regs:[],fileCabinet:""},getters:{getDocsOld:function(t){return t.docs},getDocs:function(t){return t.docsFiltering},getDoc:function(t){return function(e){return t.docs.filter(function(t){return t.doc.id==e})[0]}},getFileCabinets:function(t){return t.fileCabinets},getFileCabinet:function(t){return t.fileCabinet},getRegs:function(t){return t.regs}},actions:(Yt={},Wt()(Yt,y,function(t){var e=t.commit,i=(t.dispatch,t.rootState);return new o.a(function(t,n){ct.a.get(Q+"/api/users/"+i.user.profile.id+"/notif/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(n){try{n.data.forEach(function(t){t.full_name=t.user.profile.full_name,t.title=t.doc.title,""!=t.initiator&&(t.initiator=t.initiator.profile.full_name),t.doc.date&&(t.doc.date=Xt(t.doc.date)),t.date_doc=t.doc.date,t.date&&(t.date=Xt(t.date)),t.date_notif=t.date,t.file_cabinet=t.doc.file_cabinet.name;try{t.reg=t.doc.id+"-"+t.doc.reg.name}catch(e){t.reg=t.doc.id}t.date_expire&&t.date_expire<new Date&&console.log(t);var e=t.is_read.filter(function(t){return t.id==i.user.profile.id}),n=0==t.status&&t.user.id==i.user.profile.id;t.rowBackg=0!=e.length||n?"white":"#dcdbfc"});var r=n.data.filter(function(t){return"#dcdbfc"==t.rowBackg}),o=n.data.filter(function(t){return"white"==t.rowBackg});n.data=r.concat(o),e(I,n.data),t(n.data)}catch(n){console.log(n)}}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,"DOC_REQUEST",function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.get(Q+"/api/users/notif/"+e,{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,T,function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.get(Q+"/api/users/notif/"+e,{headers:{Authorization:"Token "+i.auth.token}}).then(function(n){var r=i.doc.docs.findIndex(function(t){return t.id==e});i.doc.docs[r]=n.data,t(n)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,E,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){ct.a.get(Q+"/api/users/"+e.user+"/notif/"+e.notif+"/"+e.pk3+"/",{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){try{i(T,e.data.id),t(e.data)}catch(e){console.log(e)}}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Yt,P,function(t){var e=t.commit,i=(t.dispatch,t.rootState);return new o.a(function(t,n){ct.a.get(Q+"/api/docs/fileCabinets").then(function(n){e(B,n.data),""==i.doc.fileCabinet&&e(H,n.data[0]);var r=i.doc.docs.filter(function(t){return t.doc.file_cabinet.id==i.doc.fileCabinet.id});e(M,r),t(n)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,j,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){ct.a.post(Q+"/api/docs/fileCabinets",{name:e},{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i(P),t(e)}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Yt,G,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){ct.a.patch(Q+"/api/docs/fileCabinets/"+e.id,{name:e.name},{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i(P),t(e)}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Yt,Z,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){ct.a.delete(Q+"/api/docs/fileCabinets/"+e.id,{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i(P),t(e)}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Yt,b,function(t){var e=t.commit;return t.dispatch,t.rootState,new o.a(function(t,i){ct.a.get(Q+"/api/docs/regs").then(function(i){e($,i.data),t(i)}).catch(function(t){try{i(t.response.request.response)}catch(e){i(t)}})})}),Wt()(Yt,k,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){ct.a.post(Q+"/api/docs/regs",{name:e},{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i(b),t(e)}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Yt,S,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){ct.a.patch(Q+"/api/docs/regs/"+e.id,{name:e.name},{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i(b),t(e)}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Yt,A,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){ct.a.delete(Q+"/api/docs/regs/"+e.id,{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i(b),t(e)}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Yt,L,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){var o;ct.a.post(Q+"/api/docs/i",e.d,{headers:{"Content-Type":"multipart/form-data",Authorization:"Token "+n.auth.token}}).then((o=vt()(ht.a.mark(function n(o){return ht.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!=e.signature_request.length)return n.next=3,e.signature_request.forEach(function(t,e){ct.a.post(Q+"/api/users/notif",{doc_id:o.data.doc.id,user_id:t.id,status:0==e?2:1,queue:e}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})});n.next=3;break;case 3:if(0!=e.show_request.length)return n.next=6,e.show_request.forEach(function(t){ct.a.post(Q+"/api/users/notif",{doc_id:o.data.doc.id,user_id:t.id,status:5}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})});n.next=6;break;case 6:return n.next=8,i(R,{id:o.data.doc.id,first:1});case 8:return n.next=10,t(o.data);case 10:case"end":return n.stop()}},n,void 0)})),function(t){return o.apply(this,arguments)})).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Yt,D,function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.get(Q+"/api/docs/download/"+e+"/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,F,function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.get(Q+"/api/docs/download_sign/"+e+"/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,R,function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.get(Q+"/api/docs/add_signature/"+e.id+"/"+e.first+"/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,N,function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.get(Q+"/api/docs/"+e+"/check_signature/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data.check)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,U,function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.post(Q+"/api/docs/cancel_signature/"+e.id+"/",e.data,{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,O,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){ct.a.get(Q+"/api/docs/signature_again/"+e.id+"/",{headers:{Authorization:"Token "+n.auth.token}}).then(function(o){e?(console.log("data",e.data),ct.a.patch(Q+"/api/docs/i/"+e.id,e.data,{headers:{"Content-Type":"multipart/form-data",Authorization:"Token "+n.auth.token}}).then(function(e){i(y).then(function(e){t(o.data)})}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})):i(y).then(function(e){t(o.data)})}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Wt()(Yt,"DOC_SIGNATURE_QUEUE",function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.get(Q+"/api/docs/signature_queue/"+e+"/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,z,function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.delete(Q+"/api/docs/i/"+e,{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,"DOC_DELETE_FROM_LOCAL",function(t,e){t.commit,t.dispatch;var i=t.rootState;return new o.a(function(t,n){ct.a.delete(Q+"/api/docs/delete_from_local/"+e.id+"/"+e.type+"/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),Wt()(Yt,q,function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new o.a(function(t,r){var o=e.id;delete e.id,ct.a.patch(Q+"/api/docs/i/"+o,e,{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i(y),t(e)}).catch(function(t){try{r(t.response.request.response)}catch(e){r(t)}})})}),Yt),mutations:(te={},Wt()(te,I,function(t,e){n.a.set(t,"docs",e)}),Wt()(te,M,function(t,e){n.a.set(t,"docsFiltering",e)}),Wt()(te,$,function(t,e){n.a.set(t,"regs",e)}),Wt()(te,B,function(t,e){n.a.set(t,"fileCabinets",e)}),Wt()(te,H,function(t,e){n.a.set(t,"fileCabinet",e)}),Wt()(te,"DOC_REQUEST_SUCCESS",function(t,e){t.doc.push(e)}),Wt()(te,V,function(t,e){n.a.set(t,"reload",e)}),te)},ne={state:{reload:"",rememberPassword:!1,errorAuth:""},getters:{getReload:function(t){return t.reload},getRememberPassword:function(t){return t.rememberPassword},getErrorAuth:function(t){return t.errorAuth}},actions:{},mutations:(ee={},Wt()(ee,V,function(t,e){n.a.set(t,"reload",e)}),Wt()(ee,K,function(t,e){n.a.set(t,"rememberPassword",e)}),Wt()(ee,W,function(t,e){n.a.set(t,"errorAuth",e)}),ee)},re=i("DkTT");n.a.use(nt.a);var oe=new nt.a.Store({modules:{user:Qt,auth:Jt,doc:ie,addit:ne},strict:!1,plugins:[Object(re.a)()]}),se=i("e7F3");function ae(t,e,i){oe.getters.isAuthenticated?i():i("/auth")}n.a.use(ut.a),n.a.use(se.a);var ce=new ut.a({mode:"history",base:"/app",routes:[{path:"/",component:wt,children:[{path:"",redirect:"/documents/all"},{path:"documents/:id",meta:{title:"Главная, СЭД МТУСИ"},component:Pt,props:{columns:[{key:"reg",title:"№"},{key:"title",title:"НАЗВАНИЕ"},{key:"full_name",title:"ВЛАДЕЛЕЦ"},{key:"date_doc",title:"ДАТА ДОБАВЛЕНИЯ"}]}}],beforeEnter:ae},{path:"/auth",name:"auth",meta:{title:"Вход, СЭД МТУСИ"},component:tt,beforeEnter:function(t,e,i){oe.getters.isAuthenticated?i("/"):i()}},{path:"/help",name:"help",meta:{title:"Помощь, СЭД МТУСИ"},component:Vt},{path:"/addDoc",name:"addDoc",meta:{title:"Добавить документ, СЭД МТУСИ"},component:qt,beforeEnter:ae},{path:"/document/:id",name:"document",meta:{title:"Документ, СЭД МТУСИ"},component:Tt,props:!0,beforeEnter:ae},{path:"/document/:id/edit",name:"editDocument",meta:{title:"Редактировать документ, СЭД МТУСИ"},component:Nt,props:!0,beforeEnter:ae},{path:"/profile",redirect:"/profile/notif",component:yt,children:[{path:"notif",name:"notif",meta:{title:"Уведомления, СЭД МТУСИ"},component:Pt,props:{id:"notif",columns:[{key:"initiator",title:"ИНИЦИАТОР"},{key:"title",title:"ДОКУМЕНТ"},{key:"message",title:"СООБЩЕНИЕ"},{key:"date_notif",title:"ДАТА"},{key:"file_cabinet",title:"КАРТОТЕКА"}]}},{path:"edit",meta:{title:"Редактировать профиль, СЭД МТУСИ"},component:St},{path:"adm",meta:{title:"Администрирование профилей, СЭД МТУСИ"},component:Lt,beforeEnter:function(t,e,i){oe.getters.getProfile.is_staff?i():i("/")}}],beforeEnter:ae},{path:"/404",meta:{title:"Страница не найдена, СЭД МТУСИ"},component:It},{path:"*",redirect:"/404"}]});ce.beforeEach(function(t,e,i){document.title=t.meta.title,i()});var le=ce;n.a.config.productionTip=!1;var de=localStorage.getItem("user-token");de&&(ct.a.defaults.headers.common.Authorization=de),new n.a({el:"#app",router:le,store:oe,components:{App:dt},template:"<App/>"})},W4rq:function(t,e){},WBGL:function(t,e){},Wk90:function(t,e){},bWC2:function(t,e){},dVBu:function(t,e){},eJ4n:function(t,e){},"jM++":function(t,e){},jqDq:function(t,e){},oxa4:function(t,e){},xuLB:function(t,e){},zN2z:function(t,e){}},[["Vtdi",1,2]]]);
//# sourceMappingURL=0.93ca3499bf2f535f107f.js.map